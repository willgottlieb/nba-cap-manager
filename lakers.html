<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Los Angeles Lakers Cap Manager</title>
<style>
@import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap');

* { margin:0; padding:0; box-sizing:border-box; }

:root {
  --red:#552583; --red-dark:#552583;
  --bg0:#0a0a0a; --bg1:#1a1a1a; --bg2:#2a2a2a; --bg3:#333;
  --txt:#fff; --txt2:#a0a0a0;
  --green:#10b981; --amber:#f59e0b; --danger:#ef4444;
  --pink:#ec4899; --blue:#3b82f6; --gray:#6b7280; --purple:#a855f7;
}

body {
  font-family:'Inter',sans-serif;
  background:linear-gradient(135deg,var(--bg0) 0%,#1a0a0f 100%);
  color:var(--txt); min-height:100vh; padding:20px;
}
.container { max-width:1900px; margin:0 auto; transform-origin: top center; }

/* ‚îÄ‚îÄ‚îÄ HEADER ‚îÄ‚îÄ‚îÄ */
.header {
  background:linear-gradient(135deg,var(--red),var(--red-dark));
  padding:28px 32px; border-radius:14px; margin-bottom:24px;
  box-shadow:0 16px 48px rgba(206,17,65,.3);
  position:relative; overflow:hidden; 
}
.header::before {
  content:''; position:absolute; inset:0;
  background:radial-gradient(circle at 80% 50%,rgba(255,255,255,.07) 0%,transparent 60%);
}
.header > * { position:relative; z-index:1; }
.header h1 { font-size:38px; font-weight:800; letter-spacing:-.02em; margin-bottom:8px; }
.header .sub { font-size:14px; opacity:.9; font-weight:400; line-height:1.5; margin-bottom:4px; }
.header .sub a { color:#fff; text-decoration:underline; font-weight:600; }

/* ‚îÄ‚îÄ‚îÄ CONTROLS ‚îÄ‚îÄ‚îÄ */
.controls { display:flex; gap:10px; margin-bottom:14px; flex-wrap:wrap; align-items:center; }
.controls-row-2 { display:flex; gap:8px; margin-bottom:20px; }
.search-wrap { position:relative; }
.search-input {
  width:100%; background:var(--bg1); border:1px solid var(--bg3); color:var(--txt);
  padding:11px 14px; border-radius:8px; font-size:14px; font-family:inherit;
  height:44px; box-sizing:border-box;
}
.search-input:focus { outline:none; border-color:var(--red); }

.dropdown {
  position:absolute; top:calc(100% + 4px); left:0; right:0;
  background:var(--bg1); border:1px solid var(--bg3); border-radius:8px;
  max-height:260px; overflow-y:auto; z-index:200; display:none;
}
.dropdown.show { display:block; }
.dropdown-item { padding:11px 14px; cursor:pointer; border-bottom:1px solid var(--bg3); transition:background .15s; }
.dropdown-item:last-child { border-bottom:none; }
.dropdown-item:hover { background:var(--bg2); }
.dropdown-item .d-name { font-weight:600; font-size:14px; }
.dropdown-item .d-meta { font-size:12px; color:var(--txt2); margin-top:2px; }

.btn {
  background:var(--bg1); border:1px solid var(--bg3); color:var(--txt);
  padding:11px 18px; border-radius:8px; font-size:13px; font-weight:600;
  cursor:pointer; transition:.2s; display:flex; align-items:center; gap:6px; white-space:nowrap;
  height:44px; box-sizing:border-box;
}
.btn:hover { background:var(--bg2); transform:translateY(-1px); box-shadow:0 4px 12px rgba(0,0,0,.3); }
.btn-red { background:var(--red); border-color:var(--red); }
.btn-red:hover { background:var(--red-dark); }

/* ‚îÄ‚îÄ‚îÄ SUMMARY CARDS ‚îÄ‚îÄ‚îÄ */
.cards { display:grid; grid-template-columns:repeat(5,1fr); gap:14px; margin-bottom:20px; }
.card {
  background:var(--bg1); border:1px solid var(--bg3); border-radius:10px; padding:16px;
  transition:.25s;
}
.card:hover { transform:translateY(-3px); box-shadow:0 8px 24px rgba(0,0,0,.4); }
.card.c-ok   { border-color:var(--green); background:linear-gradient(135deg,var(--bg1),rgba(16,185,129,.08)); }
.card.c-warn { border-color:var(--amber); background:linear-gradient(135deg,var(--bg1),rgba(245,158,11,.08)); }
.card.c-bad  { border-color:var(--danger); background:linear-gradient(135deg,var(--bg1),rgba(239,68,68,.08)); }
.card .c-lbl { font-size:11px; font-weight:700; text-transform:uppercase; letter-spacing:.06em; color:var(--txt2); margin-bottom:6px; }
.card .c-val { font-size:24px; font-weight:700; }
.card .c-sub { font-size:12px; color:var(--txt2); margin-top:3px; }

/* ‚îÄ‚îÄ‚îÄ LEGEND ‚îÄ‚îÄ‚îÄ */
.legend {
  background:var(--bg1); border:1px solid var(--bg3); border-radius:10px;
  padding:14px 18px; margin-bottom:20px; display:flex; flex-direction:column; gap:8px;
  
}
.legend .lbl { font-size:11px; font-weight:700; text-transform:uppercase; letter-spacing:.06em; color:var(--txt2); }
.legend-items { display:flex; gap:14px; flex-wrap:wrap; }
.legend-item { display:flex; align-items:center; gap:6px; font-size:12px; }
.lg-badge { padding:3px 7px; border-radius:4px; font-size:10px; font-weight:700; letter-spacing:.04em; }
.lg-gtd { background:rgba(16,185,129,.15); color:var(--green); border:1px solid rgba(16,185,129,.3); }
.lg-po { background:rgba(59,130,246,.15); color:var(--blue); border:1px solid rgba(59,130,246,.3); }
.lg-to { background:rgba(236,72,153,.15); color:var(--pink); border:1px solid rgba(236,72,153,.3); }
.lg-qo { background:rgba(168,85,247,.15); color:var(--purple); border:1px solid rgba(168,85,247,.3); }
.lg-ch { background:rgba(245,158,11,.15); color:var(--amber); border:1px solid rgba(245,158,11,.3); }
.lg-dead { background:rgba(107,114,128,.15); color:var(--gray); border:1px solid rgba(107,114,128,.3); }

/* ‚îÄ‚îÄ‚îÄ TABLE - PERFECTLY ALIGNED ‚îÄ‚îÄ‚îÄ */
.section {
  background:var(--bg1); border:1px solid var(--bg3); border-radius:10px;
  padding:0; margin-bottom:20px; overflow:hidden; 
}
.section-hdr {
  background:var(--bg2); padding:14px 20px; font-weight:700; font-size:14px;
  letter-spacing:.02em; border-bottom:1px solid var(--bg3); display:flex; align-items:center; justify-content:space-between;
}
.section-hdr-sub { font-size:12px; font-weight:600; color:var(--txt2); }

.tbl-wrap { overflow-x:auto; }

/* Percentage-based grid: scales proportionally with container */
.tbl-head, .tbl-row {
  display:grid;
  grid-template-columns: 3.23% 15% 2.5% 14.31% 13.31% 13.31% 13.31% 13.31% 11.72%;
  gap:0; padding:0 20px; align-items:center;
}

.tbl-head {
  background:var(--bg2); padding:12px 20px; font-size:11px; font-weight:700;
  text-transform:uppercase; letter-spacing:.06em; color:var(--txt2);
  border-bottom:1px solid var(--bg3);
}
.h-num { text-align:center; }
.h-sal { text-align:center; }
.h-act { text-align:center; padding-left:20px; }

.tbl-row {
  padding:16px 20px; border-bottom:1px solid rgba(51,51,51,.5);
  transition:background .15s;
}
.tbl-row:hover { background:rgba(255,255,255,.02); }
.tbl-row:last-child { border-bottom:none; }

.r-num { color:var(--txt2); font-size:13px; font-weight:600; text-align:center; }
.r-name { font-weight:600; font-size:14px; padding-right:5px; }
.sal-cell { text-align:center; padding:0 5px; }
.s-amt { font-size:13px; font-weight:600; display:block; }
.s-pct { font-size:10px; color:var(--txt2); margin-top:2px; display:block; }
.s-badge { 
  display:inline-block; padding:2px 6px; border-radius:3px; 
  font-size:9px; font-weight:700; letter-spacing:.04em;
}
.s-gtd { background:rgba(16,185,129,.15); color:var(--green); border:1px solid rgba(16,185,129,.3); }
.s-po { background:rgba(59,130,246,.15); color:var(--blue); border:1px solid rgba(59,130,246,.3); }
.s-to { background:rgba(236,72,153,.15); color:var(--pink); border:1px solid rgba(236,72,153,.3); }
.s-qo { background:rgba(168,85,247,.15); color:var(--purple); border:1px solid rgba(168,85,247,.3); }
.s-ch { background:rgba(245,158,11,.15); color:var(--amber); border:1px solid rgba(245,158,11,.3); }
.s-dead { background:rgba(107,114,128,.15); color:var(--gray); border:1px solid rgba(107,114,128,.3); }

.act { display:grid; grid-template-columns:1fr 1fr; gap:4px; padding-left:8px; }
.act-btn {
  background:var(--bg2); border:1px solid var(--bg3); color:var(--txt);
  padding:5px 8px; border-radius:4px; font-size:10px; font-weight:600;
  cursor:pointer; transition:.15s; text-align:center; display:flex;
  align-items:center; justify-content:center; gap:3px; white-space:nowrap;
}
.act-btn:hover { background:var(--bg3); transform:translateY(-1px); }
.act-btn.disabled { opacity:.3; cursor:not-allowed; }
.act-btn.disabled:hover { transform:none; }

/* ‚îÄ‚îÄ‚îÄ FLIPPED TABLES (Years as Columns) ‚îÄ‚îÄ‚îÄ */
.flip-table { width:100%; border-collapse:collapse; margin-top:12px; }
.flip-table th {
  background:var(--bg2); padding:10px; text-align:center; font-size:11px;
  font-weight:700; text-transform:uppercase; letter-spacing:.06em; color:var(--txt2);
  border-bottom:1px solid var(--bg3);
}
.flip-table th:first-child { text-align:left; }
.flip-table td {
  padding:10px; font-size:13px; border-bottom:1px solid rgba(51,51,51,.3);
  text-align:center; font-weight:600;
}
.flip-table td:first-child { text-align:left; font-weight:600; }
.flip-table tr:last-child td { border-bottom:none; }
.flip-table td.pos { color:var(--green); }
.flip-table td.neg { color:var(--danger); }

/* ‚îÄ‚îÄ‚îÄ TRADE BLOCK ‚îÄ‚îÄ‚îÄ */
.trade-section { background:rgba(59,130,246,.05); border:2px solid var(--blue); }
.trade-subsection { padding:16px 20px; border-bottom:1px solid rgba(59,130,246,.2); }
.trade-subsection:last-child { border-bottom:none; }
.trade-subsection-hdr {
  font-size:12px; font-weight:700; text-transform:uppercase; letter-spacing:.06em;
  color:var(--blue); margin-bottom:12px; display:flex; align-items:center; gap:8px;
}

/* Trade block with year headers */
.trade-year-headers {
  display:grid;
  grid-template-columns: 3.23% 15% 2.5% 14.31% 13.31% 13.31% 13.31% 13.31% 11.72%;
  gap:0; padding:0 20px 8px 20px;
  font-size:10px; font-weight:700; text-transform:uppercase;
  letter-spacing:.06em; color:var(--blue);
}
.trade-year-headers div { text-align:center; }
.trade-year-headers div:first-child,
.trade-year-headers div:nth-child(2) { text-align:left; padding-right:0; }
.trade-year-headers div:nth-child(2) { visibility:hidden; }

.trade-total {
  background:rgba(59,130,246,.1); padding:12px 20px; font-size:13px; font-weight:600;
  border-top:2px solid var(--blue); display:grid;
  grid-template-columns: 3.23% 15% 2.5% 14.31% 13.31% 13.31% 13.31% 13.31% 11.72%;
  gap:0; align-items:center;
}
.trade-total div { text-align:center; font-weight:700; color:var(--blue); }
.trade-total div:first-child { text-align:center; }
.trade-total div:nth-child(2) { text-align:left; padding-right:0; }

.trade-legality {
  background:rgba(245,158,11,.08); border:1px solid rgba(245,158,11,.3);
  padding:14px 18px; margin:16px 20px; border-radius:8px;
}
.trade-legality-title {
  font-size:12px; font-weight:700; color:var(--amber); margin-bottom:8px;
  display:flex; align-items:center; gap:6px;
}
.trade-legality-row {
  display:flex; justify-content:space-between; padding:6px 0;
  font-size:12px; border-bottom:1px solid rgba(245,158,11,.1);
}
.trade-legality-row:last-child { border-bottom:none; padding-top:10px; }
.trade-legality-row .lbl { color:var(--txt2); }
.trade-legality-row .val { font-weight:600; }
.trade-status { font-size:14px; font-weight:700; display:flex; align-items:center; gap:6px; }
.trade-status.legal { color:var(--green); }
.trade-status.illegal { color:var(--danger); }

/* ‚îÄ‚îÄ‚îÄ MODAL ‚îÄ‚îÄ‚îÄ */
.modal-overlay {
  display:none; position:fixed; top:0; left:0; right:0; bottom:0; 
  background:rgba(0,0,0,.85); z-index:1000; 
  align-items:center; justify-content:center; overflow-y:auto;
}
.modal-overlay.show { display:flex; }
.modal {
  background:var(--bg1); border:1px solid var(--bg3); border-radius:12px;
  width:90%; max-height:90vh; overflow:auto;
  margin:auto;
}
.modal-body { padding:24px; max-width:500px; margin:0 auto; }
.modal-hdr {
  background:var(--bg2); padding:18px 24px; border-bottom:1px solid var(--bg3);
  font-size:16px; font-weight:700;
}
.modal-row { margin-bottom:16px; }
.modal-row:last-child { margin-bottom:0; }
.modal-lbl { font-size:12px; font-weight:600; color:var(--txt2); margin-bottom:6px; text-transform:uppercase; letter-spacing:.04em; }
.modal-input, .modal-select {
  width:100%; background:var(--bg2); border:1px solid var(--bg3); color:var(--txt);
  padding:10px 12px; border-radius:6px; font-size:14px; font-family:inherit;
}
.modal-input:focus, .modal-select:focus { outline:none; border-color:var(--red); }
.modal-input-group { display:flex; align-items:center; gap:8px; }
.modal-input-group input, .modal-input-group select { flex:1; }
.modal-input-group span { font-size:14px; font-weight:600; color:var(--txt2); }
.modal-actions { display:flex; gap:10px; margin-top:24px; justify-content:flex-end; }
.modal-btn {
  padding:10px 20px; border-radius:6px; font-size:13px; font-weight:600;
  cursor:pointer; transition:.2s; border:none;
}
.modal-btn-cancel { background:var(--bg2); color:var(--txt); }
.modal-btn-cancel:hover { background:var(--bg3); }
.modal-btn-primary { background:var(--red); color:#fff; }
.modal-btn-primary:hover { background:var(--red-dark); }
.modal-btn-danger { background:var(--danger); color:#fff; }
.modal-btn-danger:hover { background:#dc2626; }

/* Cap value colors */
.cap-value-green { color: var(--green); }
.cap-value-red { color: var(--danger); }

</style>
</head>
<body>
<div class="container">

<div class="header">
  <h1>üèÄ Los Angeles Lakers Cap Manager</h1>
  <div class="sub">You be the GM: Make trades, sign free agents and manage the Bulls multi-year cap sheet.</div>
  <div class="sub">Created by <a href="https://x.com/Will_Gottlieb" target="_blank">Will Gottlieb</a></div>
</div>

<!-- CONTROL SECTION - Compact 3-Segment Layout -->
<div style="display:grid; grid-template-columns:1fr 1fr 1fr; gap:12px; margin-bottom:30px; align-items:stretch; max-height:90px;">
  
  <!-- LEFT SEGMENT: 2x3 Button Grid -->
  <div style="display:grid; grid-template-columns:1fr 1fr 1fr; grid-template-rows:1fr 1fr; gap:8px;">
    <!-- Row 1 -->
    <button class="btn" onclick="openManageRoster()" style="justify-content:center; font-size:12px; padding:8px 12px;" title="Add or remove players from your roster">üë• MANAGE ROSTER</button>
    <button class="btn btn-red" id="tradeModeBtn" onclick="openTradeSearch()" style="justify-content:center; font-size:12px; padding:8px 12px;" title="Search players and build trades">üîÑ TRADE MACHINE</button>
    <button class="btn" id="faModeBtn" onclick="openFASearch()" style="justify-content:center; font-size:12px; padding:8px 12px;" title="Search and sign free agents">‚úçÔ∏è SIGN FAs</button>
    
    <!-- Row 2 -->
    <button class="btn" onclick="openDraftPicks()" style="justify-content:center; font-size:12px; padding:8px 12px;" title="View all Bulls draft picks through 2032">üìã PICKS</button>
    <button class="btn" onclick="openExceptions()" style="justify-content:center; font-size:12px; padding:8px 12px;" title="View available trade exceptions and salary cap tools">üí∞ EXCEPTIONS</button>
    <div style="display:grid; grid-template-columns:1fr 1fr 1fr; gap:4px;">
      <button class="btn" onclick="undo()" style="justify-content:center; padding:6px; font-size:14px;" title="Undo last change">‚óÄ</button>
      <button class="btn" onclick="redo()" style="justify-content:center; padding:6px; font-size:14px;" title="Redo last undone change">‚ñ∂</button>
      <button class="btn" onclick="resetAll()" style="justify-content:center; padding:6px; font-size:14px;" title="Reset to default Bulls roster">üóëÔ∏è</button>
    </div>
  </div>
  
  <!-- MIDDLE SEGMENT: Cap Situation - Dashboard Style (2025-26, Side-by-Side) -->
  <div style="background:linear-gradient(to bottom, var(--bg1), var(--bg2)); border:1px solid var(--bg3); border-radius:10px; padding:12px 16px; display:flex; flex-direction:column; position:relative; overflow:hidden;">
    <!-- Accent stripe -->
    <div style="position:absolute; top:0; left:0; right:0; height:3px; background:linear-gradient(90deg, var(--red), var(--green));"></div>
    
    <div style="font-weight:800; font-size:11px; color:var(--txt); text-transform:uppercase; text-align:center; margin-bottom:10px; letter-spacing:.08em; position:relative; z-index:1">2025-26 CAP SITUATION</div>
    
    <div style="display:grid; grid-template-columns:1fr 1fr; gap:12px; position:relative; z-index:1;">
      <!-- Cap Space -->
      <div style="background:rgba(0,0,0,0.3); border-radius:6px; padding:10px 12px; border:1px solid rgba(255,255,255,0.05); text-align:center;">
        <div style="font-size:9px; color:rgba(255,255,255,0.5); margin-bottom:4px; text-transform:uppercase; font-weight:600">CAP SPACE</div>
        <div id="capSummaryControl" class="cap-value-green" style="font-size:20px; font-weight:900"></div>
      </div>
      
      <!-- Tax Space -->
      <div style="background:rgba(0,0,0,0.3); border-radius:6px; padding:10px 12px; border:1px solid rgba(255,255,255,0.05); text-align:center;">
        <div style="font-size:9px; color:rgba(255,255,255,0.5); margin-bottom:4px; text-transform:uppercase; font-weight:600">TAX SPACE</div>
        <div id="taxSummaryControl" class="cap-value-green" style="font-size:20px; font-weight:900"></div>
      </div>
    </div>
  </div>
  
  <!-- RIGHT SEGMENT: Legend -->
  <div class="legend" style="margin:0; padding:10px 14px; display:flex; flex-direction:column; gap:6px; align-items:center; justify-content:center">
    <div style="font-weight:700; font-size:10px; color:var(--txt2); text-transform:uppercase; letter-spacing:.06em">LEGEND</div>
    <div style="display:flex; gap:10px; align-items:center; font-size:11px;">
      <div class="legend-item"><span class="lg-badge lg-gtd">GTD</span> Guaranteed</div>
      <div class="legend-item"><span class="lg-badge lg-po">PO</span> Player Option</div>
      <div class="legend-item"><span class="lg-badge lg-to">TO</span> Team Option</div>
    </div>
    <div style="display:flex; gap:10px; align-items:center; font-size:11px;">
      <div class="legend-item"><span class="lg-badge lg-qo">QO</span> Qualifying Offer</div>
      <div class="legend-item"><span class="lg-badge lg-ch">CH</span> Cap Hold</div>
      <div class="legend-item"><span class="lg-badge lg-dead">DEAD</span> Dead Money</div>
      <div class="legend-item"><span class="lg-badge" style="background:rgba(139,92,246,.15); color:#8b5cf6; border:1px solid rgba(139,92,246,.3)">2WAY</span> Two-Way</div>
    </div>
  </div>
  
</div>

<!-- TRADE BLOCK -->
<div class="section trade-section" id="tradeSection" style="display:none">
  <div class="section-hdr">
    üîÑ Trade Block
    <span class="section-hdr-sub" id="tradeModeIndicator"></span>
  </div>
  
  <div class="trade-subsection" id="incomingSection" style="display:none">
    <div class="trade-subsection-hdr">üì• INCOMING PLAYERS</div>
    <div class="trade-year-headers">
      <div></div><div></div>
      <div>2025-26</div><div>2026-27</div><div>2027-28</div><div>2028-29</div><div>2029-30</div>
      <div></div>
    </div>
    <div id="incomingBody"></div>
    <div class="trade-total" id="incomingTotal"></div>
  </div>
  
  <div class="trade-subsection">
    <div class="trade-subsection-hdr">üì§ OUTGOING PLAYERS</div>
    <div class="trade-year-headers">
      <div></div><div></div>
      <div>2025-26</div><div>2026-27</div><div>2027-28</div><div>2028-29</div><div>2029-30</div>
      <div></div>
    </div>
    <div id="tradeBody"></div>
    <div class="trade-total" id="outgoingTotal"></div>
  </div>
  
  <div id="tradeLegalityBox"></div>
</div>

<!-- ACTIVE ROSTER -->
<div class="section" id="activeSection">
  <div class="section-hdr" style="display:grid; grid-template-columns:3.23% 15% 2.5% 14.31% 13.31% 13.31% 13.31% 13.31% 11.72%; gap:0; padding:14px 20px; align-items:center;">
    <div></div>
    <div style="font-weight:700; font-size:14px">Active Roster</div>
    <div></div>
    <div onclick="setSortYear('2025-26')" style="cursor:pointer; text-align:center; font-weight:700; font-size:14px" title="Click to sort by 2025-26 salary">
      2025-26 <span id="sort-2025-26">‚ñº</span>
    </div>
    <div onclick="setSortYear('2026-27')" style="cursor:pointer; text-align:center; font-weight:700; font-size:14px" title="Click to sort by 2026-27 salary">
      2026-27 <span id="sort-2026-27" style="display:none">‚ñº</span>
    </div>
    <div onclick="setSortYear('2027-28')" style="cursor:pointer; text-align:center; font-weight:700; font-size:14px" title="Click to sort by 2027-28 salary">
      2027-28 <span id="sort-2027-28" style="display:none">‚ñº</span>
    </div>
    <div onclick="setSortYear('2028-29')" style="cursor:pointer; text-align:center; font-weight:700; font-size:14px" title="Click to sort by 2028-29 salary">
      2028-29 <span id="sort-2028-29" style="display:none">‚ñº</span>
    </div>
    <div onclick="setSortYear('2029-30')" style="cursor:pointer; text-align:center; font-weight:700; font-size:14px" title="Click to sort by 2029-30 salary">
      2029-30 <span id="sort-2029-30" style="display:none">‚ñº</span>
    </div>
    <div></div>
  </div>
  <div class="tbl-wrap">
    <div class="tbl-head">
      <div class="h-num">#</div>
      <div class="h-name">Player</div>
      <div class="h-age" style="text-align:center; font-size:11px">Age</div>
      <div style="text-align:center">
        <div id="count-2025-26" style="font-size:9px; font-weight:600; color:var(--txt2); text-transform:none"></div>
      </div>
      <div style="text-align:center">
        <div id="count-2026-27" style="font-size:9px; font-weight:600; color:var(--txt2); text-transform:none"></div>
      </div>
      <div style="text-align:center">
        <div id="count-2027-28" style="font-size:9px; font-weight:600; color:var(--txt2); text-transform:none"></div>
      </div>
      <div style="text-align:center">
        <div id="count-2028-29" style="font-size:9px; font-weight:600; color:var(--txt2); text-transform:none"></div>
      </div>
      <div style="text-align:center">
        <div id="count-2029-30" style="font-size:9px; font-weight:600; color:var(--txt2); text-transform:none"></div>
      </div>
      <div class="h-act">Actions</div>
    </div>
    <div id="rosterBody"></div>
  </div>
</div>

<!-- CAP SITUATION (Aligned with Roster) -->
<div class="section">
  <div class="section-hdr">üìä Cap Situation</div>
  <div style="padding:0">
    <!-- Year Headers -->
    <div style="display:grid; grid-template-columns: 3.23% 15% 2.5% 14.31% 13.31% 13.31% 13.31% 13.31% 11.72%; gap:0; padding:12px 20px 8px 20px; font-size:11px; font-weight:700; text-transform:uppercase; letter-spacing:.06em; color:var(--txt2); border-bottom:1px solid var(--bg3)">
      <div></div>
      <div>Status</div>
      <div></div>
      <div style="text-align:center">2025-26</div>
      <div style="text-align:center">2026-27</div>
      <div style="text-align:center">2027-28</div>
      <div style="text-align:center">2028-29</div>
      <div style="text-align:center">2029-30</div>
      <div></div>
    </div>
    <!-- Cap Situation Body -->
    <div id="capSituationBody"></div>
  </div>
</div>

<!-- CAP FIGURES (Aligned with Roster) -->
<div class="section" style="margin-top:22px">
  <div class="section-hdr">üìã Cap Figures</div>
  <div style="padding:0">
    <div style="display:grid; grid-template-columns: 3.23% 15% 2.5% 14.31% 13.31% 13.31% 13.31% 13.31% 11.72%; gap:0; padding:12px 20px 8px 20px; font-size:11px; font-weight:700; text-transform:uppercase; letter-spacing:.06em; color:var(--txt2)">
      <div></div>
      <div>Threshold</div>
      <div></div>
      <div style="text-align:center">2025-26</div>
      <div style="text-align:center">2026-27</div>
      <div style="text-align:center">2027-28</div>
      <div style="text-align:center">2028-29</div>
      <div style="text-align:center">2029-30</div>
      <div></div>
    </div>
    <div style="display:grid; grid-template-columns: 3.23% 15% 2.5% 14.31% 13.31% 13.31% 13.31% 13.31% 11.72%; gap:0; padding:12px 20px; border-bottom:1px solid var(--bg3)">
      <div></div>
      <div style="font-weight:600; font-size:14px">Salary Cap</div>
      <div></div>
      <div style="text-align:center; font-size:13px; font-weight:600">$154.6M</div>
      <div style="text-align:center; font-size:13px; font-weight:600">$165.5M</div>
      <div style="text-align:center; font-size:13px; font-weight:600">$173.7M</div>
      <div style="text-align:center; font-size:13px; font-weight:600">$182.4M</div>
      <div style="text-align:center; font-size:13px; font-weight:600">$191.6M</div>
      <div></div>
    </div>
    <div style="display:grid; grid-template-columns: 3.23% 15% 2.5% 14.31% 13.31% 13.31% 13.31% 13.31% 11.72%; gap:0; padding:12px 20px; border-bottom:1px solid var(--bg3)">
      <div></div>
      <div style="font-weight:600; font-size:14px">Luxury Tax</div>
      <div></div>
      <div style="text-align:center; font-size:13px; font-weight:600">$187.9M</div>
      <div style="text-align:center; font-size:13px; font-weight:600">$201.0M</div>
      <div style="text-align:center; font-size:13px; font-weight:600">$215.1M</div>
      <div style="text-align:center; font-size:13px; font-weight:600">$230.2M</div>
      <div style="text-align:center; font-size:13px; font-weight:600">$246.3M</div>
      <div></div>
    </div>
    <div style="display:grid; grid-template-columns: 3.23% 15% 2.5% 14.31% 13.31% 13.31% 13.31% 13.31% 11.72%; gap:0; padding:12px 20px; border-bottom:1px solid var(--bg3)">
      <div></div>
      <div style="font-weight:600; font-size:14px">First Apron</div>
      <div></div>
      <div style="text-align:center; font-size:13px; font-weight:600">$195.9M</div>
      <div style="text-align:center; font-size:13px; font-weight:600">$209.7M</div>
      <div style="text-align:center; font-size:13px; font-weight:600">$224.3M</div>
      <div style="text-align:center; font-size:13px; font-weight:600">$240.0M</div>
      <div style="text-align:center; font-size:13px; font-weight:600">$256.8M</div>
      <div></div>
    </div>
    <div style="display:grid; grid-template-columns: 3.23% 15% 2.5% 14.31% 13.31% 13.31% 13.31% 13.31% 11.72%; gap:0; padding:12px 20px">
      <div></div>
      <div style="font-weight:600; font-size:14px">Second Apron</div>
      <div></div>
      <div style="text-align:center; font-size:13px; font-weight:600">$207.8M</div>
      <div style="text-align:center; font-size:13px; font-weight:600">$222.4M</div>
      <div style="text-align:center; font-size:13px; font-weight:600">$237.9M</div>
      <div style="text-align:center; font-size:13px; font-weight:600">$254.6M</div>
      <div style="text-align:center; font-size:13px; font-weight:600">$272.4M</div>
      <div></div>
    </div>
  </div>
</div>

<div class="modal-overlay" id="modalOverlay">
  <div class="modal" id="modal"></div>
</div>

</div>

<script>
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// BULLS CAP MANAGER V5.1 - FINAL
// Trade Executed: ≈†ariƒá & Huerter OUT, Ivey & Conley IN
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

let acquisitionMode = 'trade';
let sortYear = '2025-26';
let history = [];
let historyIndex = -1;
const MAX_HISTORY = 20;
let redoStack = [];
let tradeBlock = [];
let incomingPlayers = [];

const YEARS = ['2025-26', '2026-27', '2027-28', '2028-29', '2029-30'];

const CAP_THRESHOLDS = {
  '2025-26': { cap: 154647000, tax: 187897000, apron1: 195946000, apron2: 207825000 },
  '2026-27': { cap: 165472290, tax: 201049790, apron1: 209662220, apron2: 222372750 },
  '2027-28': { cap: 173745905, tax: 215123275, apron1: 224338575, apron2: 237938843 },
  '2028-29': { cap: 182433200, tax: 230181905, apron1: 240042276, apron2: 254594561 },
  '2029-30': { cap: 191554860, tax: 246294638, apron1: 256845235, apron2: 272416181 }
};

// ROSTER - UPDATED POST-DEADLINE
let roster = [
  { id:1, name:"LeBron James", age:41, sal:{'2025-26':52627153, '2026-27':0, '2027-28':0, '2028-29':0, '2029-30':0}, typ:{'2025-26':'po', '2026-27':'', '2027-28':'', '2028-29':'', '2029-30':''} },
  { id:2, name:"Luka Donƒçiƒá", age:26, sal:{'2025-26':45999660, '2026-27':49800000, '2027-28':53784000, '2028-29':57768000, '2029-30':0}, typ:{'2025-26':'gtd', '2026-27':'gtd', '2027-28':'gtd', '2028-29':'po', '2029-30':''} },
  { id:3, name:"Deandre Ayton", age:27, sal:{'2025-26':43654814, '2026-27':8104000, '2027-28':0, '2028-29':0, '2029-30':0}, typ:{'2025-26':'gtd', '2026-27':'po', '2027-28':'', '2028-29':'', '2029-30':''} },
  { id:4, name:"Marcus Smart", age:31, sal:{'2025-26':26720855, '2026-27':5390700, '2027-28':0, '2028-29':0, '2029-30':0}, typ:{'2025-26':'gtd', '2026-27':'po', '2027-28':'', '2028-29':'', '2029-30':''} },
  { id:5, name:"Rui Hachimura", age:28, sal:{'2025-26':18259259, '2026-27':0, '2027-28':0, '2028-29':0, '2029-30':0}, typ:{'2025-26':'gtd', '2026-27':'', '2027-28':'', '2028-29':'', '2029-30':''} },
  { id:6, name:"Austin Reaves", age:27, sal:{'2025-26':13937574, '2026-27':14898786, '2027-28':0, '2028-29':0, '2029-30':0}, typ:{'2025-26':'gtd', '2026-27':'po', '2027-28':'', '2028-29':'', '2029-30':''} },
  { id:7, name:"Jarred Vanderbilt", age:26, sal:{'2025-26':11571429, '2026-27':12428571, '2027-28':13285714, '2028-29':0, '2029-30':0}, typ:{'2025-26':'gtd', '2026-27':'gtd', '2027-28':'po', '2028-29':'', '2029-30':''} },
  { id:8, name:"Luke Kennard", age:29, sal:{'2025-26':11000000, '2026-27':0, '2027-28':0, '2028-29':0, '2029-30':0}, typ:{'2025-26':'gtd', '2026-27':'', '2027-28':'', '2028-29':'', '2029-30':''} },
  { id:9, name:"Maxi Kleber", age:34, sal:{'2025-26':11000000, '2026-27':0, '2027-28':0, '2028-29':0, '2029-30':0}, typ:{'2025-26':'gtd', '2026-27':'', '2027-28':'', '2028-29':'', '2029-30':''} },
  { id:10, name:"Jake LaRavia", age:24, sal:{'2025-26':6000000, '2026-27':6000000, '2027-28':0, '2028-29':0, '2029-30':0}, typ:{'2025-26':'gtd', '2026-27':'gtd', '2027-28':'', '2028-29':'', '2029-30':''} },
  { id:11, name:"Dalton Knecht", age:24, sal:{'2025-26':4010160, '2026-27':4201080, '2027-28':6452860, '2028-29':0, '2029-30':0}, typ:{'2025-26':'gtd', '2026-27':'gtd', '2027-28':'to', '2028-29':'', '2029-30':''} },
  { id:12, name:"Jaxson Hayes", age:25, sal:{'2025-26':3449323, '2026-27':0, '2027-28':0, '2028-29':0, '2029-30':0}, typ:{'2025-26':'gtd', '2026-27':'', '2027-28':'', '2028-29':'', '2029-30':''} },
  { id:13, name:"Shake Milton", age:0, sal:{'2025-26':3000000, '2026-27':3287406, '2027-28':0, '2028-29':0, '2029-30':0}, typ:{'2025-26':'gtd', '2026-27':'gtd', '2027-28':'', '2028-29':'', '2029-30':''} },
  { id:14, name:"Bronny James", age:21, sal:{'2025-26':1955377, '2026-27':2296271, '2027-28':2486995, '2028-29':0, '2029-30':0}, typ:{'2025-26':'gtd', '2026-27':'gtd', '2027-28':'to', '2028-29':'', '2029-30':''} },
  { id:15, name:"Adou Thiero", age:21, sal:{'2025-26':1272870, '2026-27':2150917, '2027-28':2525901, '2028-29':0, '2029-30':0}, typ:{'2025-26':'gtd', '2026-27':'gtd', '2027-28':'to', '2028-29':'', '2029-30':''} },
];

let deadMoney = [];

let capHolds = [];
let emptyRows = [];

// Enhanced NBA_DB with new Bulls players
const NBA_DB = [
  {name:"Stephen Curry",team:"GSW",sal:{'2025-26':59606817,'2026-27':62587158,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"Joel Embiid",team:"PHI",sal:{'2025-26':55224526,'2026-27':58100000,'2027-28':62748000,'2028-29':67396000,'2029-30':0}},
  {name:"Nikola Jokiƒá",team:"DEN",sal:{'2025-26':55224526,'2026-27':59033114,'2027-28':62841702,'2028-29':0,'2029-30':0}},
  {name:"Kevin Durant",team:"HOU",sal:{'2025-26':54708609,'2026-27':43902439,'2027-28':46097561,'2028-29':0,'2029-30':0}},
  {name:"Jayson Tatum",team:"BOS",sal:{'2025-26':54126450,'2026-27':58456566,'2027-28':62786682,'2028-29':67116798,'2029-30':71446914}},
  {name:"Giannis Antetokounmpo",team:"MIL",sal:{'2025-26':54126450,'2026-27':58456566,'2027-28':62786682,'2028-29':0,'2029-30':0}},
  {name:"Anthony Davis",team:"DAL",sal:{'2025-26':54126450,'2026-27':58456566,'2027-28':62786682,'2028-29':0,'2029-30':0}},
  {name:"Jimmy Butler",team:"GSW",sal:{'2025-26':54126450,'2026-27':56832773,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"Damian Lillard",team:"MIL",sal:{'2025-26':68230450,'2026-27':13398800,'2027-28':14104000,'2028-29':0,'2029-30':0}},
  {name:"Bradley Beal",team:"PHO",sal:{'2025-26':59020270,'2026-27':5621700,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"Jaylen Brown",team:"BOS",sal:{'2025-26':53142264,'2026-27':57078728,'2027-28':61015192,'2028-29':64951656,'2029-30':0}},
  {name:"Devin Booker",team:"PHO",sal:{'2025-26':53142264,'2026-27':57078728,'2027-28':61015192,'2028-29':64065952,'2029-30':69191228}},
  {name:"Karl-Anthony Towns",team:"NYK",sal:{'2025-26':53142264,'2026-27':57078728,'2027-28':61015192,'2028-29':0,'2029-30':0}},
  {name:"LeBron James",team:"LAL",sal:{'2025-26':52627153,'2026-27':0,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"Paul George",team:"PHI",sal:{'2025-26':51666090,'2026-27':54126380,'2027-28':56586670,'2028-29':0,'2029-30':0}},
  {name:"Kawhi Leonard",team:"LAC",sal:{'2025-26':50000000,'2026-27':50300000,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"Zach LaVine",team:"SAC",sal:{'2025-26':47499660,'2026-27':48967380,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"Cade Cunningham",team:"DET",sal:{'2025-26':46394100,'2026-27':50105628,'2027-28':53817156,'2028-29':57528684,'2029-30':61240212}},
  {name:"Evan Mobley",team:"CLE",sal:{'2025-26':46394100,'2026-27':50105628,'2027-28':53817156,'2028-29':57528684,'2029-30':61240212}},
  {name:"Jamal Murray",team:"DEN",sal:{'2025-26':46394100,'2026-27':50105628,'2027-28':53817156,'2028-29':57528684,'2029-30':0}},
  {name:"Lauri Markkanen",team:"UTA",sal:{'2025-26':46394100,'2026-27':46113154,'2027-28':49824681,'2028-29':53536209,'2029-30':0}},
  {name:"Donovan Mitchell",team:"CLE",sal:{'2025-26':46394100,'2026-27':50105628,'2027-28':53817156,'2028-29':0,'2029-30':0}},
  {name:"Luka Donƒçiƒá",team:"LAL",sal:{'2025-26':45999660,'2026-27':49800000,'2027-28':53784000,'2028-29':57768000,'2029-30':0}},
  {name:"Trae Young",team:"WAS",sal:{'2025-26':45999660,'2026-27':48967380,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"Anthony Edwards",team:"MIN",sal:{'2025-26':45550512,'2026-27':48924624,'2027-28':52298736,'2028-29':55672848,'2029-30':0}},
  {name:"Tyrese Haliburton",team:"IND",sal:{'2025-26':45550512,'2026-27':48924624,'2027-28':52298736,'2028-29':55672848,'2029-30':0}},
  {name:"Pascal Siakam",team:"IND",sal:{'2025-26':45550512,'2026-27':48924624,'2027-28':52298736,'2028-29':0,'2029-30':0}},
  {name:"Domantas Sabonis",team:"SAC",sal:{'2025-26':42336000,'2026-27':45472000,'2027-28':48608000,'2028-29':0,'2029-30':0}},
  {name:"OG Anunoby",team:"NYK",sal:{'2025-26':39568966,'2026-27':42500000,'2027-28':45431034,'2028-29':48362068,'2029-30':0}},
  {name:"Zion Williamson",team:"NOP",sal:{'2025-26':39446090,'2026-27':42166510,'2027-28':44886930,'2028-29':0,'2029-30':0}},
  {name:"Ja Morant",team:"MEM",sal:{'2025-26':39446090,'2026-27':42166510,'2027-28':44886930,'2028-29':0,'2029-30':0}},
  {name:"Darius Garland",team:"CLE",sal:{'2025-26':39446090,'2026-27':42166510,'2027-28':44886930,'2028-29':0,'2029-30':0}},
  {name:"James Harden",team:"LAC",sal:{'2025-26':39182693,'2026-27':42317307,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"Scottie Barnes",team:"TOR",sal:{'2025-26':38661750,'2026-27':41754690,'2027-28':44847630,'2028-29':47940570,'2029-30':51033510}},
  {name:"Franz Wagner",team:"ORL",sal:{'2025-26':38661750,'2026-27':41754690,'2027-28':44847630,'2028-29':47940570,'2029-30':51033510}},
  {name:"Shai Gilgeous-Alexander",team:"OKC",sal:{'2025-26':38333050,'2026-27':40806150,'2027-28':61005000,'2028-29':65885400,'2029-30':70765800}},
  {name:"Michael Porter Jr.",team:"BRK",sal:{'2025-26':38333050,'2026-27':40806150,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"Brandon Ingram",team:"TOR",sal:{'2025-26':38095238,'2026-27':40000000,'2027-28':41904762,'2028-29':0,'2029-30':0}},
  {name:"Tyrese Maxey",team:"PHI",sal:{'2025-26':37958760,'2026-27':40770520,'2027-28':43582280,'2028-29':46394040,'2029-30':0}},
  {name:"LaMelo Ball",team:"CHO",sal:{'2025-26':37958760,'2026-27':40770520,'2027-28':43582280,'2028-29':46394040,'2029-30':0}},
  {name:"De\'Aaron Fox",team:"SAS",sal:{'2025-26':37096620,'2026-27':49800000,'2027-28':53784000,'2028-29':57768000,'2029-30':61752000}},
  {name:"Bam Adebayo",team:"MIA",sal:{'2025-26':37096620,'2026-27':49800000,'2027-28':53784000,'2028-29':57768000,'2029-30':0}},
  {name:"Desmond Bane",team:"ORL",sal:{'2025-26':36725670,'2026-27':39446090,'2027-28':42166510,'2028-29':44886930,'2029-30':0}},
  {name:"Kyrie Irving",team:"DAL",sal:{'2025-26':36566002,'2026-27':39491282,'2027-28':42416562,'2028-29':0,'2029-30':0}},
  {name:"Deandre Ayton",team:"POR",sal:{'2025-26':43654814,'2026-27':8104000,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"Jaren Jackson Jr.",team:"MEM",sal:{'2025-26':35000000,'2026-27':49000000,'2027-28':50500000,'2028-29':52000000,'2029-30':53500000}},
  {name:"Jalen Suggs",team:"ORL",sal:{'2025-26':35000000,'2026-27':32400000,'2027-28':29600000,'2028-29':26800000,'2029-30':26700000}},
  {name:"Rudy Gobert",team:"MIN",sal:{'2025-26':35000000,'2026-27':36500000,'2027-28':38000000,'2028-29':0,'2029-30':0}},
  {name:"Jalen Brunson",team:"NYK",sal:{'2025-26':34944001,'2026-27':37739521,'2027-28':40535041,'2028-29':43330561,'2029-30':0}},
  {name:"Alperen ≈ûeng√ºn",team:"HOU",sal:{'2025-26':33944954,'2026-27':35642202,'2027-28':37339450,'2028-29':39036697,'2029-30':39036697}},
  {name:"Jalen Green",team:"PHO",sal:{'2025-26':33584499,'2026-27':36251166,'2027-28':36000000,'2028-29':0,'2029-30':0}},
  {name:"Khris Middleton",team:"WAS",sal:{'2025-26':33296296,'2026-27':0,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"Immanuel Quickley",team:"TOR",sal:{'2025-26':32500000,'2026-27':32500000,'2027-28':32500000,'2028-29':32500000,'2029-30':0}},
  {name:"Jrue Holiday",team:"POR",sal:{'2025-26':32400000,'2026-27':34800000,'2027-28':37200000,'2028-29':0,'2029-30':0}},
  {name:"Jerami Grant",team:"POR",sal:{'2025-26':32000001,'2026-27':34206898,'2027-28':36413790,'2028-29':0,'2029-30':0}},
  {name:"Jordan Poole",team:"NOP",sal:{'2025-26':31848215,'2026-27':34044642,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"Tyler Herro",team:"MIA",sal:{'2025-26':31000000,'2026-27':33000000,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"Julius Randle",team:"MIN",sal:{'2025-26':30864198,'2026-27':33333334,'2027-28':35802468,'2028-29':0,'2029-30':0}},
  {name:"Dejounte Murray",team:"NOP",sal:{'2025-26':30801103,'2026-27':32785071,'2027-28':30751504,'2028-29':0,'2029-30':0}},
  {name:"Kristaps Porzi≈Üƒ£is",team:"ATL",sal:{'2025-26':30731707,'2026-27':0,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"CJ McCollum",team:"ATL",sal:{'2025-26':30666666,'2026-27':0,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"Jalen Johnson",team:"ATL",sal:{'2025-26':30000000,'2026-27':30000000,'2027-28':30000000,'2028-29':30000000,'2029-30':30000000}},
  {name:"Isaiah Hartenstein",team:"OKC",sal:{'2025-26':28500000,'2026-27':28500000,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"Andrew Wiggins",team:"MIA",sal:{'2025-26':28223215,'2026-27':30169644,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"Derrick White",team:"BOS",sal:{'2025-26':28100000,'2026-27':30348000,'2027-28':32596000,'2028-29':34844000,'2029-30':0}},
  {name:"RJ Barrett",team:"TOR",sal:{'2025-26':27705357,'2026-27':29616071,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"Anfernee Simons",team:"BOS",sal:{'2025-26':27678571,'2026-27':0,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"Devin Vassell",team:"SAS",sal:{'2025-26':27000000,'2026-27':27000000,'2027-28':24652174,'2028-29':27000000,'2029-30':0}},
  {name:"Terry Rozier",team:"MIA",sal:{'2025-26':26643031,'2026-27':0,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"Tobias Harris",team:"DET",sal:{'2025-26':26634146,'2026-27':0,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"John Collins",team:"LAC",sal:{'2025-26':26580000,'2026-27':0,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"Draymond Green",team:"GSW",sal:{'2025-26':25892857,'2026-27':27678571,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"Nic Claxton",team:"BRK",sal:{'2025-26':25352272,'2026-27':23147727,'2027-28':20943184,'2028-29':0,'2029-30':0}},
  {name:"Myles Turner",team:"MIL",sal:{'2025-26':25318251,'2026-27':26584164,'2027-28':27850077,'2028-29':29115990,'2029-30':0}},
  {name:"Trey Murphy III",team:"NOP",sal:{'2025-26':25000000,'2026-27':27000000,'2027-28':29000000,'2028-29':31000000,'2029-30':0}},
  {name:"Josh Giddey",team:"CHI",sal:{'2025-26':25000000,'2026-27':25000000,'2027-28':25000000,'2028-29':25000000,'2029-30':0}},
  {name:"Miles Bridges",team:"CHO",sal:{'2025-26':25000000,'2026-27':22826087,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"Fred VanVleet",team:"HOU",sal:{'2025-26':25000000,'2026-27':25000000,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"Mikal Bridges",team:"NYK",sal:{'2025-26':24900000,'2026-27':33482145,'2027-28':36160714,'2028-29':38839285,'2029-30':41517856}},
  {name:"DeMar DeRozan",team:"SAC",sal:{'2025-26':24570000,'2026-27':25740000,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"Jaden McDaniels",team:"MIN",sal:{'2025-26':24393104,'2026-27':26200001,'2027-28':28006898,'2028-29':29813790,'2029-30':0}},
  {name:"De\'Andre Hunter",team:"CLE",sal:{'2025-26':23303571,'2026-27':24910714,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"Aaron Gordon",team:"DEN",sal:{'2025-26':22841455,'2026-27':33658037,'2027-28':36350680,'2028-29':39043323,'2029-30':0}},
  {name:"Jonathan Kuminga",team:"GSW",sal:{'2025-26':22500000,'2026-27':24300000,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"Kyle Kuzma",team:"MIL",sal:{'2025-26':22410605,'2026-27':20345152,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"Kentavious Caldwell-Pope",team:"MEM",sal:{'2025-26':21621500,'2026-27':21621500,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"Marcus Smart",team:"WAS",sal:{'2025-26':26720855,'2026-27':5390700,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"Naz Reid",team:"MIN",sal:{'2025-26':21551724,'2026-27':23275862,'2027-28':25000000,'2028-29':26724138,'2029-30':28448276}},
  {name:"Nikola Vuƒçeviƒá",team:"CHI",sal:{'2025-26':21481481,'2026-27':0,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"Dillon Brooks",team:"PHO",sal:{'2025-26':21124110,'2026-27':19992727,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"Cameron Johnson",team:"DEN",sal:{'2025-26':21057065,'2026-27':23062500,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"Norman Powell",team:"MIA",sal:{'2025-26':20482758,'2026-27':0,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"Jarrett Allen",team:"CLE",sal:{'2025-26':20000000,'2026-27':28000000,'2027-28':30240000,'2028-29':32480000,'2029-30':0}},
  {name:"Jakob Poeltl",team:"TOR",sal:{'2025-26':19500000,'2026-27':19500000,'2027-28':27300000,'2028-29':29484000,'2029-30':27300000}},
  {name:"Josh Hart",team:"NYK",sal:{'2025-26':19472240,'2026-27':20923760,'2027-28':22375280,'2028-29':0,'2029-30':0}},
  {name:"Jusuf Nurkiƒá",team:"UTA",sal:{'2025-26':19375000,'2026-27':0,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"Harrison Barnes",team:"SAS",sal:{'2025-26':19000000,'2026-27':0,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"Collin Sexton",team:"CHO",sal:{'2025-26':18975000,'2026-27':0,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"Malik Monk",team:"SAC",sal:{'2025-26':18797619,'2026-27':20190035,'2027-28':21582451,'2028-29':0,'2029-30':0}},
  {name:"Santi Aldama",team:"MEM",sal:{'2025-26':18485916,'2026-27':17007043,'2027-28':17007043,'2028-29':0,'2029-30':0}},
  {name:"Rui Hachimura",team:"LAL",sal:{'2025-26':18259259,'2026-27':0,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"Luguentz Dort",team:"OKC",sal:{'2025-26':18222222,'2026-27':18222222,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"Alex Caruso",team:"OKC",sal:{'2025-26':18102000,'2026-27':19550160,'2027-28':20998320,'2028-29':22446480,'2029-30':0}},
  {name:"Ivica Zubac",team:"LAC",sal:{'2025-26':18102000,'2026-27':19550160,'2027-28':20998320,'2028-29':0,'2029-30':0}},
  {name:"Andrew Nembhard",team:"IND",sal:{'2025-26':18102000,'2026-27':19550160,'2027-28':20998320,'2028-29':0,'2029-30':0}},
  {name:"Zach Collins",team:"CHI",sal:{'2025-26':18080496,'2026-27':0,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"Patrick Williams",team:"CHI",sal:{'2025-26':18000000,'2026-27':18000000,'2027-28':18000000,'2028-29':18000000,'2029-30':0}},
  {name:"Kevin Huerter",team:"CHI",sal:{'2025-26':17991071,'2026-27':0,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"Keldon Johnson",team:"SAS",sal:{'2025-26':17500000,'2026-27':17500000,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"Grayson Allen",team:"PHO",sal:{'2025-26':16875000,'2026-27':18125000,'2027-28':19375000,'2028-29':0,'2029-30':0}},
  {name:"Duncan Robinson",team:"DET",sal:{'2025-26':26722692,'2026-27':15992957,'2027-28':15151222,'2028-29':0,'2029-30':0}},
  {name:"Klay Thompson",team:"DAL",sal:{'2025-26':16666667,'2026-27':17460317,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"Bogdan Bogdanoviƒá",team:"LAC",sal:{'2025-26':16020000,'2026-27':16020000,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"Max Strus",team:"CLE",sal:{'2025-26':15936452,'2026-27':16660836,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"Terance Mann",team:"BRK",sal:{'2025-26':15500000,'2026-27':15500000,'2027-28':16000000,'2028-29':0,'2029-30':0}},
  {name:"Paolo Banchero",team:"ORL",sal:{'2025-26':15334769,'2026-27':41500000,'2027-28':44820000,'2028-29':48140000,'2029-30':51460000}},
  {name:"Nickeil Alexander-Walker",team:"ATL",sal:{'2025-26':15161800,'2026-27':14403710,'2027-28':15161800,'2028-29':15919890,'2029-30':0}},
  {name:"Onyeka Okongwu",team:"ATL",sal:{'2025-26':15000000,'2026-27':16120000,'2027-28':16880000,'2028-29':0,'2029-30':0}},
  {name:"Jonathan Isaac",team:"ORL",sal:{'2025-26':15000000,'2026-27':14500000,'2027-28':14500000,'2028-29':15000000,'2029-30':0}},
  {name:"Isaiah Stewart",team:"DET",sal:{'2025-26':15000000,'2026-27':15000000,'2027-28':15000000,'2028-29':0,'2029-30':0}},
  {name:"Daniel Gafford",team:"DAL",sal:{'2025-26':14386320,'2026-27':17263584,'2027-28':18126763,'2028-29':18989942,'2029-30':0}},
  {name:"Deni Avdija",team:"POR",sal:{'2025-26':14375000,'2026-27':13125000,'2027-28':11875000,'2028-29':0,'2029-30':0}},
  {name:"Jordan Clarkson",team:"UTA",sal:{'2025-26':16581988,'2026-27':0,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"P.J. Washington",team:"DAL",sal:{'2025-26':14152174,'2026-27':19813044,'2027-28':21398088,'2028-29':22983132,'2029-30':24568176}},
  {name:"Steven Adams",team:"HOU",sal:{'2025-26':14130434,'2026-27':13000000,'2027-28':11869566,'2028-29':0,'2029-30':0}},
  {name:"Dennis Schr√∂der",team:"SAC",sal:{'2025-26':14104000,'2026-27':14809200,'2027-28':15514400,'2028-29':0,'2029-30':0}},
  {name:"Caris LeVert",team:"DET",sal:{'2025-26':14104000,'2026-27':14809200,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"Damian Lillard",team:"POR",sal:{'2025-26':68230450,'2026-27':13398800,'2027-28':14104000,'2028-29':0,'2029-30':0}},
  {name:"Obi Toppin",team:"IND",sal:{'2025-26':14000000,'2026-27':15000000,'2027-28':16025000,'2028-29':0,'2029-30':0}},
  {name:"Corey Kispert",team:"ATL",sal:{'2025-26':13975000,'2026-27':13975000,'2027-28':13050000,'2028-29':13050000,'2029-30':0}},
  {name:"Herbert Jones",team:"NOP",sal:{'2025-26':13937574,'2026-27':14898786,'2027-28':20858300,'2028-29':22526964,'2029-30':24195628}},
  {name:"Austin Reaves",team:"LAL",sal:{'2025-26':13937574,'2026-27':14898786,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"Cooper Flagg",team:"DAL",sal:{'2025-26':13825920,'2026-27':14517480,'2027-28':15208680,'2028-29':19178146,'2029-30':0}},
  {name:"Chet Holmgren",team:"OKC",sal:{'2025-26':13731368,'2026-27':41500000,'2027-28':44820000,'2028-29':48140000,'2029-30':51460000}},
  {name:"Josh Green",team:"CHO",sal:{'2025-26':13666667,'2026-27':14679012,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"Grant Williams",team:"CHO",sal:{'2025-26':13645500,'2026-27':14265750,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"Bobby Portis",team:"MIL",sal:{'2025-26':13445754,'2026-27':14521414,'2027-28':15597074,'2028-29':0,'2029-30':0}},
  {name:"Kelly Olynyk",team:"SAS",sal:{'2025-26':13445122,'2026-27':0,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"Victor Wembanyama",team:"SAS",sal:{'2025-26':13376880,'2026-27':16868246,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"Robert Williams",team:"POR",sal:{'2025-26':13285713,'2026-27':0,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"Zaccharie Risacher",team:"ATL",sal:{'2025-26':13197720,'2026-27':13826040,'2027-28':17434637,'2028-29':0,'2029-30':0}},
  {name:"Cole Anthony",team:"MEM",sal:{'2025-26':15396274,'2026-27':0,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"Mitchell Robinson",team:"NYK",sal:{'2025-26':12954546,'2026-27':0,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"Coby White",team:"CHI",sal:{'2025-26':12888889,'2026-27':0,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"Dorian Finney-Smith",team:"HOU",sal:{'2025-26':12700000,'2026-27':13335000,'2027-28':13335000,'2028-29':13335000,'2029-30':0}},
  {name:"Brandon Clarke",team:"MEM",sal:{'2025-26':12500000,'2026-27':12500000,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"Dylan Harper",team:"SAS",sal:{'2025-26':12370320,'2026-27':12989040,'2027-28':13607760,'2028-29':17172994,'2029-30':0}},
  {name:"Isaiah Joe",team:"OKC",sal:{'2025-26':12362338,'2026-27':11323006,'2027-28':11323006,'2028-29':0,'2029-30':0}},
  {name:"Jabari Smith Jr.",team:"HOU",sal:{'2025-26':12350392,'2026-27':23643411,'2027-28':21751940,'2028-29':23643411,'2029-30':25534883}},
  {name:"Donte DiVincenzo",team:"MIN",sal:{'2025-26':11990000,'2026-27':12535000,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"Brandon Miller",team:"CHO",sal:{'2025-26':11968800,'2026-27':15104626,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"Alex Sarr",team:"WAS",sal:{'2025-26':11808240,'2026-27':12370680,'2027-28':15611798,'2028-29':0,'2029-30':0}},
  {name:"Davion Mitchell",team:"MIA",sal:{'2025-26':11600000,'2026-27':12400000,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"Moses Moody",team:"GSW",sal:{'2025-26':11574075,'2026-27':12500000,'2027-28':13425925,'2028-29':0,'2029-30':0}},
  {name:"Jarred Vanderbilt",team:"LAL",sal:{'2025-26':11571429,'2026-27':12428571,'2027-28':13285714,'2028-29':0,'2029-30':0}},
  {name:"Matisse Thybulle",team:"POR",sal:{'2025-26':11550000,'2026-27':0,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"Gabe Vincent",team:"LAL",sal:{'2025-26':11500000,'2026-27':0,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"Keegan Murray",team:"SAC",sal:{'2025-26':11144093,'2026-27':24137936,'2027-28':26068965,'2028-29':27999999,'2029-30':29931033}},
  {name:"VJ Edgecombe",team:"PHI",sal:{'2025-26':11108880,'2026-27':11663880,'2027-28':12219720,'2028-29':15445727,'2029-30':0}},
  {name:"Aaron Nesmith",team:"IND",sal:{'2025-26':11000000,'2026-27':11000000,'2027-28':19418000,'2028-29':20971440,'2029-30':0}},
  {name:"Luke Kornet",team:"SAS",sal:{'2025-26':11000000,'2026-27':10450000,'2027-28':9900000,'2028-29':9350000,'2029-30':0}},
  {name:"Isaac Okoro",team:"CHI",sal:{'2025-26':11000000,'2026-27':11814814,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"Maxi Kleber",team:"LAL",sal:{'2025-26':11000000,'2026-27':0,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"Luke Kennard",team:"ATL",sal:{'2025-26':11000000,'2026-27':0,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"Wendell Carter Jr.",team:"ORL",sal:{'2025-26':10850000,'2026-27':18102000,'2027-28':19550160,'2028-29':20998320,'2029-30':0}},
  {name:"Mike Conley",team:"MIN",sal:{'2025-26':10774038,'2026-27':0,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"Scoot Henderson",team:"POR",sal:{'2025-26':10748040,'2026-27':13585523,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"Reed Sheppard",team:"HOU",sal:{'2025-26':10603560,'2026-27':11108880,'2027-28':14041625,'2028-29':0,'2029-30':0}},
  {name:"Jonas Valanƒçi≈´nas",team:"DEN",sal:{'2025-26':10395000,'2026-27':10000000,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"T.J. McConnell",team:"IND",sal:{'2025-26':10200000,'2026-27':11000000,'2027-28':11800000,'2028-29':11800000,'2029-30':0}},
  {name:"Royce O\'Neale",team:"PHO",sal:{'2025-26':10125000,'2026-27':10875000,'2027-28':11625000,'2028-29':0,'2029-30':0}},
  {name:"Jaden Ivey",team:"DET",sal:{'2025-26':10107163,'2026-27':0,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"Aaron Wiggins",team:"OKC",sal:{'2025-26':10102803,'2026-27':9224300,'2027-28':8345797,'2028-29':8345797,'2029-30':0}},
  {name:"Sam Hauser",team:"BOS",sal:{'2025-26':10044644,'2026-27':10848215,'2027-28':11651785,'2028-29':12455356,'2029-30':0}},
  {name:"Kon Knueppel",team:"CHO",sal:{'2025-26':10015680,'2026-27':10516560,'2027-28':11017560,'2028-29':13937214,'2029-30':0}},
  {name:"Derrick Jones Jr.",team:"LAC",sal:{'2025-26':10000000,'2026-27':10476190,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"Lonzo Ball",team:"CLE",sal:{'2025-26':10000000,'2026-27':10000000,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"Duncan Robinson",team:"MIA",sal:{'2025-26':26722692,'2026-27':15992957,'2027-28':15151222,'2028-29':0,'2029-30':0}},
  {name:"Amen Thompson",team:"HOU",sal:{'2025-26':9690600,'2026-27':12258609,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"Caleb Martin",team:"DAL",sal:{'2025-26':9594044,'2026-27':10001493,'2027-28':9371351,'2028-29':0,'2029-30':0}},
  {name:"Stephon Castle",team:"SAS",sal:{'2025-26':9560520,'2026-27':10015920,'2027-28':12670139,'2028-29':0,'2029-30':0}},
  {name:"Pat Connaughton",team:"CHO",sal:{'2025-26':9423869,'2026-27':0,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"Buddy Hield",team:"GSW",sal:{'2025-26':9219512,'2026-27':9658536,'2027-28':10097560,'2028-29':0,'2029-30':0}},
  {name:"Kyle Anderson",team:"UTA",sal:{'2025-26':9219512,'2026-27':9658536,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"Bennedict Mathurin",team:"IND",sal:{'2025-26':9187573,'2026-27':0,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"Ace Bailey",team:"UTA",sal:{'2025-26':9069840,'2026-27':9523080,'2027-28':9976560,'2028-29':12640302,'2029-30':0}},
  {name:"Naji Marshall",team:"DAL",sal:{'2025-26':9000000,'2026-27':9428571,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"Jalen Smith",team:"CHI",sal:{'2025-26':9000000,'2026-27':9428571,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"Ty Jerome",team:"MEM",sal:{'2025-26':8781000,'2026-27':9220050,'2027-28':9659100,'2028-29':0,'2029-30':0}},
  {name:"Ausar Thompson",team:"DET",sal:{'2025-26':8775000,'2026-27':11117925,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"Brook Lopez",team:"LAC",sal:{'2025-26':8750000,'2026-27':9187500,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"Quentin Grimes",team:"PHI",sal:{'2025-26':8741209,'2026-27':0,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"Ron Holland",team:"DET",sal:{'2025-26':8657280,'2026-27':9069600,'2027-28':11491183,'2028-29':0,'2029-30':0}},
  {name:"Sam Merrill",team:"CLE",sal:{'2025-26':8482144,'2026-27':9160715,'2027-28':9839285,'2028-29':10517856,'2029-30':0}},
  {name:"Jaylin Williams",team:"OKC",sal:{'2025-26':8450704,'2026-27':7774648,'2027-28':7774648,'2028-29':0,'2029-30':0}},
  {name:"Shaedon Sharpe",team:"POR",sal:{'2025-26':8399983,'2026-27':20089287,'2027-28':21696429,'2028-29':23303571,'2029-30':24910713}},
  {name:"Kelly Oubre Jr.",team:"PHI",sal:{'2025-26':8382150,'2026-27':0,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"Goga Bitadze",team:"ORL",sal:{'2025-26':8333333,'2026-27':7608696,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"Simone Fontecchio",team:"MIA",sal:{'2025-26':8307692,'2026-27':0,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"Tre Johnson",team:"WAS",sal:{'2025-26':8237640,'2026-27':8649600,'2027-28':9061680,'2028-29':11490211,'2029-30':0}},
  {name:"Georges Niang",team:"UTA",sal:{'2025-26':8200000,'2026-27':0,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"Zeke Nnaji",team:"DEN",sal:{'2025-26':8177778,'2026-27':7466667,'2027-28':7466667,'2028-29':0,'2029-30':0}},
  {name:"Vasilije Miciƒá",team:"MIL",sal:{'2025-26':8109150,'2026-27':0,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"Deandre Ayton",team:"LAL",sal:{'2025-26':43654814,'2026-27':8104000,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"Tre Mann",team:"CHO",sal:{'2025-26':8000000,'2026-27':8000000,'2027-28':8000000,'2028-29':0,'2029-30':0}},
  {name:"Tre Jones",team:"CHI",sal:{'2025-26':8000000,'2026-27':8000000,'2027-28':8000000,'2028-29':0,'2029-30':0}},
  {name:"Kevon Looney",team:"NOP",sal:{'2025-26':8000000,'2026-27':8000000,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"Jock Landale",team:"HOU",sal:{'2025-26':10296274,'2026-27':0,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"Anthony Black",team:"ORL",sal:{'2025-26':7970280,'2026-27':10106316,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"Tidjane Sala√ºn",team:"CHO",sal:{'2025-26':7863240,'2026-27':8237880,'2027-28':10445633,'2028-29':0,'2029-30':0}},
  {name:"Max Christie",team:"DAL",sal:{'2025-26':7714286,'2026-27':8285714,'2027-28':8857143,'2028-29':0,'2029-30':0}},
  {name:"Dyson Daniels",team:"ATL",sal:{'2025-26':7707709,'2026-27':25000000,'2027-28':25000000,'2028-29':25000000,'2029-30':25000000}},
  {name:"Isaiah Jackson",team:"IND",sal:{'2025-26':7600000,'2026-27':7000000,'2027-28':6400000,'2028-29':0,'2029-30':0}},
  {name:"Jeremiah Fears",team:"NOP",sal:{'2025-26':7520040,'2026-27':7896240,'2027-28':8271960,'2028-29':10505389,'2029-30':0}},
  {name:"Ayo Dosunmu",team:"CHI",sal:{'2025-26':7518518,'2026-27':0,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"Bilal Coulibaly",team:"WAS",sal:{'2025-26':7275600,'2026-27':9240012,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"Payton Pritchard",team:"BOS",sal:{'2025-26':7232143,'2026-27':7767857,'2027-28':8303571,'2028-29':0,'2029-30':0}},
  {name:"Donovan Clingan",team:"POR",sal:{'2025-26':7178400,'2026-27':7519920,'2027-28':9550298,'2028-29':0,'2029-30':0}},
  {name:"Kenrich Williams",team:"OKC",sal:{'2025-26':7163000,'2026-27':7163000,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"Jeremy Sochan",team:"SAS",sal:{'2025-26':7096231,'2026-27':0,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"Tyus Jones",team:"ORL",sal:{'2025-26':7000000,'2026-27':0,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"Egor D—ëmin",team:"BRK",sal:{'2025-26':6889200,'2026-27':7233720,'2027-28':7578240,'2028-29':9639522,'2029-30':0}},
  {name:"Jevon Carter",team:"CHI",sal:{'2025-26':6809524,'2026-27':0,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"Clint Capela",team:"HOU",sal:{'2025-26':6700000,'2026-27':7035000,'2027-28':7370000,'2028-29':0,'2029-30':0}},
  {name:"Ousmane Dieng",team:"OKC",sal:{'2025-26':6670882,'2026-27':0,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"Jarace Walker",team:"IND",sal:{'2025-26':6665520,'2026-27':8478542,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"Dean Wade",team:"CLE",sal:{'2025-26':6623456,'2026-27':0,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"Jalen Williams",team:"OKC",sal:{'2025-26':6580997,'2026-27':41500000,'2027-28':44820000,'2028-29':48140000,'2029-30':51460000}},
  {name:"Rob Dillingham",team:"MIN",sal:{'2025-26':6576120,'2026-27':6889320,'2027-28':8763216,'2028-29':0,'2029-30':0}},
  {name:"Jalen Duren",team:"DET",sal:{'2025-26':6483144,'2026-27':0,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"Ochai Agbaji",team:"TOR",sal:{'2025-26':6383525,'2026-27':0,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"Collin Murray-Boyles",team:"TOR",sal:{'2025-26':6332520,'2026-27':6649560,'2027-28':6966000,'2028-29':8874684,'2029-30':0}},
  {name:"Mark Williams",team:"PHO",sal:{'2025-26':6276531,'2026-27':0,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"Day\'Ron Sharpe",team:"BRK",sal:{'2025-26':6250000,'2026-27':6250000,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"Ziaire Williams",team:"BRK",sal:{'2025-26':6250000,'2026-27':6250000,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"John Konchar",team:"MEM",sal:{'2025-26':6165000,'2026-27':6165000,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"Taylor Hendricks",team:"UTA",sal:{'2025-26':6127080,'2026-27':7805900,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"Saddiq Bey",team:"NOP",sal:{'2025-26':6118644,'2026-27':6440678,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"Zach Edey",team:"MEM",sal:{'2025-26':6045000,'2026-27':6332760,'2027-28':8067937,'2028-29':0,'2029-30':0}},
  {name:"Khaman Maluach",team:"PHO",sal:{'2025-26':6016080,'2026-27':6316680,'2027-28':6617160,'2028-29':8436880,'2029-30':0}},
  {name:"Jake LaRavia",team:"LAL",sal:{'2025-26':6000000,'2026-27':6000000,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"Jaden Hardy",team:"DAL",sal:{'2025-26':6000000,'2026-27':6000000,'2027-28':6000000,'2028-29':0,'2029-30':0}},
  {name:"Cam Thomas",team:"BRK",sal:{'2025-26':5993172,'2026-27':0,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"Cason Wallace",team:"OKC",sal:{'2025-26':5820240,'2026-27':7420806,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"Cody Williams",team:"UTA",sal:{'2025-26':5742480,'2026-27':6015600,'2027-28':7669890,'2028-29':0,'2029-30':0}},
  {name:"Cedric Coward",team:"MEM",sal:{'2025-26':5715120,'2026-27':6001080,'2027-28':6286920,'2028-29':8342743,'2029-30':0}},
  {name:"Al Horford",team:"GSW",sal:{'2025-26':5685000,'2026-27':5969250,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"D\'Angelo Russell",team:"DAL",sal:{'2025-26':5685000,'2026-27':5969250,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"Tari Eason",team:"HOU",sal:{'2025-26':5675766,'2026-27':0,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"Haywood Highsmith",team:"BRK",sal:{'2025-26':5616000,'2026-27':0,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"Nicolas Batum",team:"LAC",sal:{'2025-26':5601600,'2026-27':5881680,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"Jett Howard",team:"ORL",sal:{'2025-26':5529720,'2026-27':7337939,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"Guerschon Yabusele",team:"NYK",sal:{'2025-26':5500000,'2026-27':5775000,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"Matas Buzelis",team:"CHI",sal:{'2025-26':5455560,'2026-27':5715360,'2027-28':7584283,'2028-29':0,'2029-30':0}},
  {name:"Noa Essengue",team:"CHI",sal:{'2025-26':5429520,'2026-27':5701200,'2027-28':5972760,'2028-29':8230464,'2029-30':0}},
  {name:"Dario ≈†ariƒá",team:"SAC",sal:{'2025-26':5426400,'2026-27':0,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"Kris Dunn",team:"LAC",sal:{'2025-26':5426400,'2026-27':5684800,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"Dalen Terry",team:"CHI",sal:{'2025-26':5399118,'2026-27':0,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"Bradley Beal",team:"LAC",sal:{'2025-26':59020270,'2026-27':5621700,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"Paul Reed",team:"DET",sal:{'2025-26':5335894,'2026-27':5602689,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"Dereck Lively II",team:"DAL",sal:{'2025-26':5253360,'2026-27':7239131,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"Nikola Topiƒá",team:"OKC",sal:{'2025-26':5182920,'2026-27':5429760,'2027-28':7482210,'2028-29':0,'2029-30':0}},
  {name:"Derik Queen",team:"NOP",sal:{'2025-26':5157960,'2026-27':5416080,'2027-28':5673840,'2028-29':8107918,'2029-30':0}},
  {name:"Kevin Porter Jr.",team:"MIL",sal:{'2025-26':5134000,'2026-27':5390700,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"Marcus Smart",team:"LAL",sal:{'2025-26':26720855,'2026-27':5390700,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"Andre Drummond",team:"PHI",sal:{'2025-26':5000000,'2026-27':0,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"Moritz Wagner",team:"ORL",sal:{'2025-26':5000000,'2026-27':0,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"Nick Richards",team:"PHO",sal:{'2025-26':5000000,'2026-27':0,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"Gradey Dick",team:"TOR",sal:{'2025-26':4990560,'2026-27':7131511,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"Malaki Branham",team:"WAS",sal:{'2025-26':4962033,'2026-27':0,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"Devin Carter",team:"SAC",sal:{'2025-26':4923720,'2026-27':5158080,'2027-28':7370897,'2028-29':0,'2029-30':0}},
  {name:"Christian Braun",team:"DEN",sal:{'2025-26':4921797,'2026-27':21551726,'2027-28':23275863,'2028-29':25000000,'2029-30':26724137}},
  {name:"Carter Bryant",team:"SAS",sal:{'2025-26':4900320,'2026-27':5145360,'2027-28':5390640,'2028-29':7983539,'2029-30':0}},
  {name:"Walker Kessler",team:"UTA",sal:{'2025-26':4878938,'2026-27':0,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"Jordan Hawkins",team:"NOP",sal:{'2025-26':4741320,'2026-27':7021895,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"Blake Wesley",team:"WAS",sal:{'2025-26':7022602,'2026-27':0,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"Bub Carrington",team:"WAS",sal:{'2025-26':4677600,'2026-27':4900560,'2027-28':7257730,'2028-29':0,'2029-30':0}},
  {name:"Thomas Sorber",team:"OKC",sal:{'2025-26':4655040,'2026-27':4887720,'2027-28':5120400,'2028-29':7849573,'2029-30':0}},
  {name:"Kobe Bufkin",team:"BRK",sal:{'2025-26':4503720,'2026-27':0,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"Jose Alvarado",team:"NOP",sal:{'2025-26':4500000,'2026-27':4500000,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"Nikola Joviƒá",team:"MIA",sal:{'2025-26':4445417,'2026-27':16200000,'2027-28':14904000,'2028-29':15096000,'2029-30':16200000}},
  {name:"Kel\'el Ware",team:"MIA",sal:{'2025-26':4443360,'2026-27':4654920,'2027-28':7135992,'2028-29':0,'2029-30':0}},
  {name:"Yang Hansen",team:"POR",sal:{'2025-26':4422360,'2026-27':4643520,'2027-28':4864920,'2028-29':7462788,'2029-30':0}},
  {name:"Peyton Watson",team:"DEN",sal:{'2025-26':4356476,'2026-27':0,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"Miles McBride",team:"NYK",sal:{'2025-26':4333333,'2026-27':3956523,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"Keyonte George",team:"UTA",sal:{'2025-26':4278960,'2026-27':6563925,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"Jared McCain",team:"PHI",sal:{'2025-26':4221360,'2026-27':4422600,'2027-28':6784268,'2028-29':0,'2029-30':0}},
  {name:"Joan Beringer",team:"MIN",sal:{'2025-26':4201080,'2026-27':4411200,'2027-28':4621200,'2028-29':7098163,'2029-30':0}},
  {name:"Kevin Love",team:"UTA",sal:{'2025-26':4150000,'2026-27':0,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"Dalton Knecht",team:"LAL",sal:{'2025-26':4010160,'2026-27':4201080,'2027-28':6452860,'2028-29':0,'2029-30':0}},
  {name:"Ryan Rollins",team:"MIL",sal:{'2025-26':4000000,'2026-27':4000000,'2027-28':4000000,'2028-29':0,'2029-30':0}},
  {name:"Dwight Powell",team:"DAL",sal:{'2025-26':4000000,'2026-27':0,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"Walter Clayton",team:"UTA",sal:{'2025-26':3991320,'2026-27':4190520,'2027-28':4390320,'2028-29':6752312,'2029-30':0}},
  {name:"Jaime Jaquez Jr.",team:"MIA",sal:{'2025-26':3861600,'2026-27':5939141,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"Nolan Traor√©",team:"BRK",sal:{'2025-26':3811560,'2026-27':4002000,'2027-28':4193040,'2028-29':6457282,'2029-30':0}},
  {name:"Tristan Da Silva",team:"ORL",sal:{'2025-26':3809520,'2026-27':3991200,'2027-28':6138466,'2028-29':0,'2029-30':0}},
  {name:"Gary Trent Jr.",team:"MIL",sal:{'2025-26':3697105,'2026-27':3881960,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"Brandin Podziemski",team:"GSW",sal:{'2025-26':3687960,'2026-27':5679459,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"Svi Mykhailiuk",team:"UTA",sal:{'2025-26':3675000,'2026-27':3850000,'2027-28':4025000,'2028-29':0,'2029-30':0}},
  {name:"Kasparas Jakuƒçionis",team:"MIA",sal:{'2025-26':3658800,'2026-27':3841680,'2027-28':4024440,'2028-29':6205687,'2029-30':0}},
  {name:"Ja\'Kobe Walter",team:"TOR",sal:{'2025-26':3638160,'2026-27':3811800,'2027-28':5870172,'2028-29':0,'2029-30':0}},
  {name:"Gary Harris",team:"MIL",sal:{'2025-26':3634153,'2026-27':3815861,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"Cam Whitmore",team:"WAS",sal:{'2025-26':3539760,'2026-27':5458310,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"Will Riley",team:"WAS",sal:{'2025-26':3512520,'2026-27':3688320,'2027-28':3864000,'2028-29':6155352,'2029-30':0}},
  {name:"Jaylon Tyson",team:"CLE",sal:{'2025-26':3492480,'2026-27':3658560,'2027-28':5641500,'2028-29':0,'2029-30':0}},
  {name:"P.J. Tucker",team:"NYK",sal:{'2025-26':3468960,'2026-27':0,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"Jaxson Hayes",team:"LAL",sal:{'2025-26':3449323,'2026-27':0,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"Noah Clowney",team:"BRK",sal:{'2025-26':3398640,'2026-27':5414034,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"Drake Powell",team:"BRK",sal:{'2025-26':3372240,'2026-27':3540600,'2027-28':3709320,'2028-29':6101832,'2029-30':0}},
  {name:"Yves Missi",team:"NOP",sal:{'2025-26':3353040,'2026-27':3512760,'2027-28':5595827,'2028-29':0,'2029-30':0}},
  {name:"Taurean Prince",team:"MIL",sal:{'2025-26':3303774,'2026-27':3815861,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"Dariq Whitehead",team:"BRK",sal:{'2025-26':3262560,'2026-27':0,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"Asa Newell",team:"ATL",sal:{'2025-26':3237480,'2026-27':3399480,'2027-28':3560880,'2028-29':6042814,'2029-30':0}},
  {name:"DaRon Holmes",team:"DEN",sal:{'2025-26':3218760,'2026-27':3372120,'2027-28':5547138,'2028-29':0,'2029-30':0}},
  {name:"Kris Murray",team:"POR",sal:{'2025-26':3132000,'2026-27':5315004,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"Nique Clifford",team:"SAC",sal:{'2025-26':3108120,'2026-27':3263400,'2027-28':3418800,'2028-29':5979481,'2029-30':0}},
  {name:"Nassir Little",team:"PHO",sal:{'2025-26':3107143,'2026-27':3107143,'2027-28':3107143,'2028-29':3107143,'2029-30':0}},
  {name:"AJ Johnson",team:"WAS",sal:{'2025-26':3090480,'2026-27':3237120,'2027-28':5493394,'2028-29':0,'2029-30':0}},
  {name:"De\'Anthony Melton",team:"GSW",sal:{'2025-26':3080921,'2026-27':3451779,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"Shake Milton",team:"LAL",sal:{'2025-26':3000000,'2026-27':3287406,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"Kyle Filipowski",team:"UTA",sal:{'2025-26':3000000,'2026-27':3000000,'2027-28':3000000,'2028-29':0,'2029-30':0}},
  {name:"Ajay Mitchell",team:"OKC",sal:{'2025-26':3000000,'2026-27':2850000,'2027-28':2850000,'2028-29':0,'2029-30':0}},
  {name:"Julian Champagnie",team:"SAS",sal:{'2025-26':3000000,'2026-27':3000000,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"Jase Richardson",team:"ORL",sal:{'2025-26':2983320,'2026-27':3132360,'2027-28':3282000,'2028-29':5910882,'2029-30':0}},
  {name:"Kyshawn George",team:"WAS",sal:{'2025-26':2966760,'2026-27':3108000,'2027-28':5435892,'2028-29':0,'2029-30':0}},
  {name:"Tony Bradley",team:"IND",sal:{'2025-26':2940876,'2026-27':0,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"Marcus Sasser",team:"DET",sal:{'2025-26':2886720,'2026-27':5198983,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"Ben Saraf",team:"BRK",sal:{'2025-26':2884560,'2026-27':3028560,'2027-28':3172920,'2028-29':5720776,'2029-30':0}},
  {name:"Pacome Dadiet",team:"NYK",sal:{'2025-26':2847600,'2026-27':2983680,'2027-28':5373608,'2028-29':0,'2029-30':0}},
  {name:"Danny Wolf",team:"BRK",sal:{'2025-26':2801280,'2026-27':2941440,'2027-28':3081840,'2028-29':5559640,'2029-30':0}},
  {name:"Ben Sheppard",team:"IND",sal:{'2025-26':2790720,'2026-27':5031669,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"Hugo Gonz√°lez",team:"BOS",sal:{'2025-26':2783880,'2026-27':2923560,'2027-28':3062640,'2028-29':5528065,'2029-30':0}},
  {name:"Liam McNeeley",team:"CHO",sal:{'2025-26':2763960,'2026-27':2902080,'2027-28':3040320,'2028-29':5487778,'2029-30':0}},
  {name:"Dillon Jones",team:"WAS",sal:{'2025-26':2753280,'2026-27':0,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"Yanic Konan Niederh√§user",team:"LAC",sal:{'2025-26':2743800,'2026-27':2880960,'2027-28':3018480,'2028-29':5448356,'2029-30':0}},
  {name:"Nick Smith Jr.",team:"CHO",sal:{'2025-26':2710680,'2026-27':0,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"Brice Sensabaugh",team:"UTA",sal:{'2025-26':2693760,'2026-27':4862237,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"Julian Strawther",team:"DEN",sal:{'2025-26':2674200,'2026-27':4826931,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"Terrence Shannon Jr.",team:"MIN",sal:{'2025-26':2674080,'2026-27':2801640,'2027-28':5054159,'2028-29':0,'2029-30':0}},
  {name:"Ryan Dunn",team:"PHO",sal:{'2025-26':2657760,'2026-27':2784240,'2027-28':5025553,'2028-29':0,'2029-30':0}},
  {name:"Kobe Brown",team:"LAC",sal:{'2025-26':2654880,'2026-27':4792059,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"Isaiah Collier",team:"UTA",sal:{'2025-26':2638200,'2026-27':2763960,'2027-28':4988948,'2028-29':0,'2029-30':0}},
  {name:"Baylor Scheierman",team:"BOS",sal:{'2025-26':2619000,'2026-27':2744040,'2027-28':4952993,'2028-29':0,'2029-30':0}},
  {name:"Xavier Tillman Sr.",team:"BOS",sal:{'2025-26':2546675,'2026-27':0,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"Chuma Okeke",team:"CLE",sal:{'2025-26':2546675,'2026-27':0,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"Cam Spencer",team:"MEM",sal:{'2025-26':2537989,'2026-27':2411090,'2027-28':2616754,'2028-29':2830685,'2029-30':0}},
  {name:"Luka Garza",team:"BOS",sal:{'2025-26':2461463,'2026-27':2801346,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"Sandro Mamukelashvili",team:"TOR",sal:{'2025-26':2461463,'2026-27':2801346,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"Trendon Watford",team:"PHI",sal:{'2025-26':2461463,'2026-27':2801346,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"Jericho Sims",team:"MIL",sal:{'2025-26':2461463,'2026-27':2801346,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"Dru Smith",team:"MIA",sal:{'2025-26':2378870,'2026-27':2584539,'2027-28':2934742,'2028-29':0,'2029-30':0}},
  {name:"Josh Minott",team:"BOS",sal:{'2025-26':2378870,'2026-27':2584539,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"Justin Champagnie",team:"WAS",sal:{'2025-26':2349578,'2026-27':2667944,'2027-28':3005085,'2028-29':0,'2029-30':0}},
  {name:"Jordan Goodwin",team:"PHO",sal:{'2025-26':2349578,'2026-27':0,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"Jay Huff",team:"IND",sal:{'2025-26':2349578,'2026-27':2667944,'2027-28':3005085,'2028-29':0,'2029-30':0}},
  {name:"Keon Johnson",team:"BRK",sal:{'2025-26':2349578,'2026-27':0,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"Neemias Queta",team:"BOS",sal:{'2025-26':2349578,'2026-27':2667944,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"Vit Krejci",team:"ATL",sal:{'2025-26':2349578,'2026-27':2667944,'2027-28':3005085,'2028-29':0,'2029-30':0}},
  {name:"A.J. Green",team:"MIL",sal:{'2025-26':2301587,'2026-27':10044644,'2027-28':10848215,'2028-29':11651786,'2029-30':12455355}},
  {name:"Keon Ellis",team:"SAC",sal:{'2025-26':2301587,'2026-27':0,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"Vince Williams Jr.",team:"MEM",sal:{'2025-26':2301587,'2026-27':2489752,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"Sion James",team:"CHO",sal:{'2025-26':2296274,'2026-27':2411090,'2027-28':2525901,'2028-29':2735698,'2029-30':0}},
  {name:"Ryan Kalkbrenner",team:"CHO",sal:{'2025-26':2296274,'2026-27':2411090,'2027-28':2525901,'2028-29':2735698,'2029-30':0}},
  {name:"Marvin Bagley III",team:"WAS",sal:{'2025-26':2296274,'2026-27':0,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"Anthony Gill",team:"WAS",sal:{'2025-26':2296274,'2026-27':0,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"Garrett Temple",team:"TOR",sal:{'2025-26':2296274,'2026-27':0,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"Bismack Biyombo",team:"SAS",sal:{'2025-26':2296274,'2026-27':0,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"Lindy Waters III",team:"SAS",sal:{'2025-26':2296274,'2026-27':0,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"Jordan McLaughlin",team:"SAS",sal:{'2025-26':2296274,'2026-27':0,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"Russell Westbrook",team:"SAC",sal:{'2025-26':2296274,'2026-27':0,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"Doug McDermott",team:"SAC",sal:{'2025-26':2296274,'2026-27':0,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"Drew Eubanks",team:"SAC",sal:{'2025-26':2296274,'2026-27':0,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"Blake Wesley",team:"POR",sal:{'2025-26':7022602,'2026-27':0,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"Collin Gillespie",team:"PHO",sal:{'2025-26':2296274,'2026-27':0,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"Kyle Lowry",team:"PHI",sal:{'2025-26':2296274,'2026-27':0,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"Eric Gordon",team:"PHI",sal:{'2025-26':2296274,'2026-27':0,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"Landry Shamet",team:"NYK",sal:{'2025-26':2296274,'2026-27':0,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"Jordan Clarkson",team:"NYK",sal:{'2025-26':16581988,'2026-27':0,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"Bones Hyland",team:"MIN",sal:{'2025-26':2296274,'2026-27':0,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"Joe Ingles",team:"MIN",sal:{'2025-26':2296274,'2026-27':0,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"Chris Livingston",team:"MIL",sal:{'2025-26':0,'2026-27':0,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"Thanasis Antetokounmpo",team:"MIL",sal:{'2025-26':2296274,'2026-27':0,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"Amir Coffey",team:"MIL",sal:{'2025-26':2296274,'2026-27':0,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"Cole Anthony",team:"MIL",sal:{'2025-26':15396274,'2026-27':0,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"Jock Landale",team:"MEM",sal:{'2025-26':10296274,'2026-27':0,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"Chris Paul",team:"LAC",sal:{'2025-26':2296274,'2026-27':0,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"Josh Okogie",team:"HOU",sal:{'2025-26':2296274,'2026-27':0,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"Jeff Green",team:"HOU",sal:{'2025-26':2296274,'2026-27':0,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"Aaron Holiday",team:"HOU",sal:{'2025-26':2296274,'2026-27':0,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"Jae\'Sean Tate",team:"HOU",sal:{'2025-26':2296274,'2026-27':0,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"Gary Payton II",team:"GSW",sal:{'2025-26':2296274,'2026-27':0,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"Javonte Green",team:"DET",sal:{'2025-26':2296274,'2026-27':0,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"Tim Hardaway Jr.",team:"DEN",sal:{'2025-26':2296274,'2026-27':0,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"Bruce Brown",team:"DEN",sal:{'2025-26':2296274,'2026-27':0,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"Dante Exum",team:"DAL",sal:{'2025-26':2296274,'2026-27':0,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"Thomas Bryant",team:"CLE",sal:{'2025-26':2296274,'2026-27':0,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"Larry Nance Jr.",team:"CLE",sal:{'2025-26':2296274,'2026-27':0,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"Mason Plumlee",team:"CHO",sal:{'2025-26':2296274,'2026-27':0,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"Chris Boucher",team:"BOS",sal:{'2025-26':2296274,'2026-27':0,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"Scotty Pippen Jr.",team:"MEM",sal:{'2025-26':2270735,'2026-27':2461462,'2027-28':2789215,'2028-29':0,'2029-30':0}},
  {name:"JD Davison",team:"BOS",sal:{'2025-26':2270735,'2026-27':0,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"Brandon Williams",team:"DAL",sal:{'2025-26':2270735,'2026-27':0,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"Moussa Diabat√©",team:"CHO",sal:{'2025-26':2270735,'2026-27':2461462,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"DeAndre Jordan",team:"NOP",sal:{'2025-26':2269880,'2026-27':0,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"Toumani Camara",team:"POR",sal:{'2025-26':2221677,'2026-27':18080358,'2027-28':19526786,'2028-29':20973214,'2029-30':22419642}},
  {name:"Rayan Rupert",team:"POR",sal:{'2025-26':2221677,'2026-27':0,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"Ricky Council IV",team:"PHI",sal:{'2025-26':2221677,'2026-27':0,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"GG Jackson II",team:"MEM",sal:{'2025-26':2221677,'2026-27':2406205,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"Gui Santos",team:"GSW",sal:{'2025-26':2221677,'2026-27':0,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"Jalen Pickett",team:"DEN",sal:{'2025-26':2221677,'2026-27':2406205,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"Hunter Tyson",team:"DEN",sal:{'2025-26':2221677,'2026-27':2406205,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"Julian Phillips",team:"CHI",sal:{'2025-26':2221677,'2026-27':2406205,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"Jalen Wilson",team:"BRK",sal:{'2025-26':2221677,'2026-27':0,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"Jordan Walsh",team:"BOS",sal:{'2025-26':2221677,'2026-27':2406205,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"Duop Reath",team:"POR",sal:{'2025-26':2221677,'2026-27':0,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"Leonard Miller",team:"MIN",sal:{'2025-26':2221677,'2026-27':2406205,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"Andre Jackson Jr.",team:"MIL",sal:{'2025-26':2221677,'2026-27':2406205,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"Trayce Jackson-Davis",team:"GSW",sal:{'2025-26':2221677,'2026-27':2406205,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"Craig Porter Jr.",team:"CLE",sal:{'2025-26':2221677,'2026-27':2406205,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"Mouhamed Gueye",team:"ATL",sal:{'2025-26':2221677,'2026-27':2406205,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"JaVale McGee",team:"DAL",sal:{'2025-26':2208856,'2026-27':2208856,'2027-28':2208856,'2028-29':0,'2029-30':0}},
  {name:"Tyler Kolek",team:"NYK",sal:{'2025-26':2191897,'2026-27':2296271,'2027-28':2486995,'2028-29':0,'2029-30':0}},
  {name:"Jaylen Clark",team:"MIN",sal:{'2025-26':2191897,'2026-27':0,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"Tyrese Martin",team:"BRK",sal:{'2025-26':2191897,'2026-27':0,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"Precious Achiuwa",team:"SAC",sal:{'2025-26':2111516,'2026-27':0,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"Justin Edwards",team:"PHI",sal:{'2025-26':2048494,'2026-27':2411090,'2027-28':2616754,'2028-29':0,'2029-30':0}},
  {name:"Nigel Hayes-Davis",team:"PHO",sal:{'2025-26':2048494,'2026-27':0,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"N\'Faly Dante",team:"ATL",sal:{'2025-26':2048494,'2026-27':2411090,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"Tyler Smith",team:"MIL",sal:{'2025-26':1955377,'2026-27':2296271,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"Johnny Furphy",team:"IND",sal:{'2025-26':1955377,'2026-27':2296271,'2027-28':2486995,'2028-29':0,'2029-30':0}},
  {name:"Jonathan Mogbo",team:"TOR",sal:{'2025-26':1955377,'2026-27':2296271,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"Jamal Shead",team:"TOR",sal:{'2025-26':1955377,'2026-27':2296271,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"Oso Ighodaro",team:"PHO",sal:{'2025-26':1955377,'2026-27':2296271,'2027-28':2486995,'2028-29':0,'2029-30':0}},
  {name:"Ariel Hukporti",team:"NYK",sal:{'2025-26':1955377,'2026-27':0,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"Karlo Matkoviƒá",team:"NOP",sal:{'2025-26':1955377,'2026-27':2296271,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"Keshad Johnson",team:"MIA",sal:{'2025-26':1955377,'2026-27':0,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"Jaylen Wells",team:"MEM",sal:{'2025-26':1955377,'2026-27':2296271,'2027-28':2486995,'2028-29':0,'2029-30':0}},
  {name:"Bronny James",team:"LAL",sal:{'2025-26':1955377,'2026-27':2296271,'2027-28':2486995,'2028-29':0,'2029-30':0}},
  {name:"Cam Christie",team:"LAC",sal:{'2025-26':1955377,'2026-27':2296271,'2027-28':2486995,'2028-29':0,'2029-30':0}},
  {name:"Quinten Post",team:"GSW",sal:{'2025-26':1955377,'2026-27':0,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"Isaac Jones",team:"DET",sal:{'2025-26':1955377,'2026-27':0,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"Bobi Klintman",team:"DET",sal:{'2025-26':1955377,'2026-27':2296271,'2027-28':2486995,'2028-29':0,'2029-30':0}},
  {name:"Drew Timme",team:"BRK",sal:{'2025-26':1955377,'2026-27':0,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"Jamison Battle",team:"TOR",sal:{'2025-26':1955377,'2026-27':2296271,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"Adem Bona",team:"PHI",sal:{'2025-26':1955377,'2026-27':2296271,'2027-28':2486995,'2028-29':0,'2029-30':0}},
  {name:"Pelle Larsson",team:"MIA",sal:{'2025-26':1955377,'2026-27':2296271,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"Chaz Lanier",team:"DET",sal:{'2025-26':1372870,'2026-27':2150917,'2027-28':2525901,'2028-29':2735698,'2029-30':0}},
  {name:"Rasheer Fleming",team:"PHO",sal:{'2025-26':1272870,'2026-27':2150917,'2027-28':2525901,'2028-29':2735698,'2029-30':0}},
  {name:"Maxime Raynaud",team:"SAC",sal:{'2025-26':1272870,'2026-27':2150917,'2027-28':2525901,'2028-29':0,'2029-30':0}},
  {name:"Johni Broome",team:"PHI",sal:{'2025-26':1272870,'2026-27':2150917,'2027-28':2525901,'2028-29':2735698,'2029-30':0}},
  {name:"Noah Penda",team:"ORL",sal:{'2025-26':1272870,'2026-27':2150917,'2027-28':2525901,'2028-29':2735698,'2029-30':0}},
  {name:"Micah Peavy",team:"NOP",sal:{'2025-26':1272870,'2026-27':2150917,'2027-28':2525901,'2028-29':2735698,'2029-30':0}},
  {name:"Adou Thiero",team:"LAL",sal:{'2025-26':1272870,'2026-27':2150917,'2027-28':2525901,'2028-29':0,'2029-30':0}},
  {name:"Will Richard",team:"GSW",sal:{'2025-26':1272870,'2026-27':2150917,'2027-28':2525901,'2028-29':2735698,'2029-30':0}},
  {name:"Tyrese Proctor",team:"CLE",sal:{'2025-26':1272870,'2026-27':2150917,'2027-28':2525901,'2028-29':2735698,'2029-30':0}},
  {name:"Mohamed Diawara",team:"NYK",sal:{'2025-26':1272870,'2026-27':0,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"Kam Jones",team:"IND",sal:{'2025-26':1272870,'2026-27':2150917,'2027-28':2525901,'2028-29':2735698,'2029-30':0}},
  {name:"Nikola Djurisic",team:"ATL",sal:{'2025-26':1272870,'2026-27':2150917,'2027-28':2525901,'2028-29':0,'2029-30':0}},
  {name:"Olivier-Maxence Prosper",team:"DAL",sal:{'2025-26':1002360,'2026-27':1002360,'2027-28':1002360,'2028-29':0,'2029-30':0}},
  {name:"James Wiseman",team:"IND",sal:{'2025-26':1000000,'2026-27':0,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"E.J. Liddell",team:"PHO",sal:{'2025-26':706898,'2026-27':706898,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"Mamadi Diakite",team:"MEM",sal:{'2025-26':464050,'2026-27':464050,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"Ricky Rubio",team:"CLE",sal:{'2025-26':424672,'2026-27':424672,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"Monte Morris",team:"IND",sal:{'2025-26':321184,'2026-27':0,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"Didi Louzada",team:"POR",sal:{'2025-26':268032,'2026-27':268032,'2027-28':268032,'2028-29':268032,'2029-30':0}},
  {name:"Mac McClung",team:"IND",sal:{'2025-26':164060,'2026-27':0,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"Garrison Mathews",team:"IND",sal:{'2025-26':131970,'2026-27':0,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"Garrison Mathews",team:"IND",sal:{'2025-26':131970,'2026-27':0,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"Jeremiah Robinson-Earl",team:"IND",sal:{'2025-26':0,'2026-27':0,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"Jeremiah Robinson-Earl",team:"IND",sal:{'2025-26':0,'2026-27':0,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"Charles Bassey",team:"MEM",sal:{'2025-26':0,'2026-27':0,'2027-28':0,'2028-29':0,'2029-30':0}},
  {name:"Jaden Springer",team:"NOP",sal:{'2025-26':70732,'2026-27':0,'2027-28':0,'2028-29':0,'2029-30':0}},
];

// Rookie Scale Salaries (2025-26 Draft)
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// UTILITY FUNCTIONS
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

function fmt(n) {
  if (!n || n === 0) return '‚Äî';
  return '$' + (n / 1000000).toFixed(2) + 'M';
}

function pct(salary, year) {
  const cap = CAP_THRESHOLDS[year].cap;
  if (!salary || salary === 0) return '';
  return ((salary / cap) * 100).toFixed(1) + '%';
}

function sorted() {
  const active = roster.filter(p => p.typ['2025-26'] !== 'dead' && p.typ['2025-26'] !== '2way');
  const twoWay = roster.filter(p => p.typ['2025-26'] === '2way');
  const dead = roster.filter(p => p.typ['2025-26'] === 'dead');
  
  active.sort((a, b) => (b.sal[sortYear] || 0) - (a.sal[sortYear] || 0));
  twoWay.sort((a, b) => (a.name || '').localeCompare(b.name || ''));
  dead.sort((a, b) => (b.sal['2025-26'] || 0) - (a.sal['2025-26'] || 0));
  
  return [...active, ...twoWay, ...dead];
}

function setSortYear(year) {
  sortYear = year;
  render();
}

function setAcquisitionMode(mode) {
  acquisitionMode = mode;
  const tradeBtn = document.getElementById('tradeModeBtn');
  const faBtn = document.getElementById('faModeBtn');
  
  if (mode === 'trade') {
    tradeBtn.className = 'btn btn-red';
    faBtn.className = 'btn';
    document.getElementById('tradeModeIndicator').textContent = 'Trade Mode Active';
  } else {
    tradeBtn.className = 'btn';
    faBtn.className = 'btn btn-red';
    document.getElementById('tradeModeIndicator').textContent = 'Free Agency Mode Active';
  }
  
  renderTrade();
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// ENHANCED STRETCH PROVISION
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

function calculateStretchProvision(player, startYear) {
  const includedTypes = ['gtd', 'po', 'to'];
  const startIdx = YEARS.indexOf(startYear);
  if (startIdx === -1) return null;
  
  let totalGtd = 0;
  let yearsToStretch = 0;
  
  for (let i = startIdx; i < YEARS.length; i++) {
    const year = YEARS[i];
    const sal = player.sal[year] || 0;
    const typ = player.typ[year] || '';
    
    if (includedTypes.includes(typ) && sal > 0) {
      totalGtd += sal;
      yearsToStretch++;
    }
  }
  
  if (yearsToStretch === 0 || totalGtd === 0) return null;
  
  const stretchYears = (yearsToStretch * 2) + 1;
  const annualHit = Math.floor(totalGtd / stretchYears);
  
  return {
    totalGtd,
    yearsToStretch,
    stretchYears,
    annualHit,
    startYear,
    startIdx
  };
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// TRADE LEGALITY CALCULATOR (2025-26 Only)
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

function calculateTradeMatch(outgoing) {
  if (outgoing < 8270000) {
    return {
      max: Math.floor(outgoing * 2 + 250000),
      formula: "200% + $250K",
      rule: "Under $8.27M"
    };
  } else if (outgoing < 33100000) {
    return {
      max: Math.floor(outgoing + 8500000),
      formula: "100% + $8.5M",
      rule: "$8.27M to $33.1M"
    };
  } else {
    return {
      max: Math.floor(outgoing * 1.25 + 250000),
      formula: "125% + $250K",
      rule: "Over $33.1M"
    };
  }
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// RENDERING FUNCTIONS
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

function updateRosterCounts() {
  YEARS.forEach(year => {
    // Count players under contract (excluding dead money and 2-way)
    const count = roster.filter(p => {
      const typ = p.typ[year];
      const sal = p.sal[year] || 0;
      // Has salary and is not dead money or 2-way
      return sal > 0 && typ !== 'dead' && typ !== '2way';
    }).length;
    
    const countEl = document.getElementById(`count-${year}`);
    if (countEl) {
      countEl.textContent = `${count}/15 Roster Spots`;
    }
  });
}

function render() {
  renderRoster();
  renderTrade();
  renderCapSituation();
  updateCapSummary();
  updateRosterCounts();
  
  YEARS.forEach(y => {
    const el = document.getElementById(`sort-${y}`);
    if (el) el.style.display = (y === sortYear) ? 'inline' : 'none';
  });
}

function renderCards() {
  const cards = YEARS.map(year => {
    const rosterTotal = roster.reduce((sum, p) => sum + (p.sal[year] || 0), 0);
    const deadTotal = deadMoney.reduce((sum, p) => sum + (p.sal[year] || 0), 0);
    const total = rosterTotal + deadTotal;
    
    const th = CAP_THRESHOLDS[year];
    const room = th.cap - total;
    
    let cls = 'card';
    let nextThreshold = '';
    
    if (total > th.apron2) {
      cls += ' c-bad';
      const over = total - th.apron2;
      nextThreshold = `2nd Apron: ${fmt(over)} over`;
    } else if (total > th.apron1) {
      cls += ' c-bad';
      const away = th.apron2 - total;
      nextThreshold = `2nd Apron: ${fmt(away)} away`;
    } else if (total > th.tax) {
      cls += ' c-warn';
      const away = th.apron1 - total;
      nextThreshold = `1st Apron: ${fmt(away)} away`;
    } else if (total > th.cap) {
      cls += ' c-warn';
      const away = th.tax - total;
      nextThreshold = `Tax: ${fmt(away)} away`;
    } else {
      cls += ' c-ok';
      const away = th.tax - total;
      nextThreshold = `Tax: ${fmt(away)} away`;
    }
    
    return `
      <div class="${cls}">
        <div class="c-lbl">Team Salary ¬∑ ${year}</div>
        <div class="c-val">${fmt(total)}</div>
        <div class="c-sub">${room > 0 ? fmt(room) + ' under cap' : fmt(Math.abs(room)) + ' over cap'}</div>
        <div class="c-sub" style="margin-top:4px; color:var(--txt); font-weight:600">${nextThreshold}</div>
      </div>
    `;
  }).join('');
  
  document.getElementById('cards').innerHTML = cards;
}

function renderRoster() {
  const s = sorted();
  const activeRoster = s.filter(p => !tradeBlock.some(t => t.id === p.id));
  
  // Player count removed from header
  // document.getElementById('activeCount').textContent = activeRoster.length;
  // const gtdCount = activeRoster.filter(p => p.typ['2025-26'] === 'gtd' && p.sal['2025-26']).length;
  // document.getElementById('gtdCount').textContent = gtdCount;
  
  const html = activeRoster.map((p, i) => {
    const salCells = YEARS.map(year => {
      const sal = p.sal[year] || 0;
      const typ = p.typ[year] || '';
      const percentage = pct(sal, year);
      let badge = '';
      if (typ === 'gtd') badge = '<span class="s-badge s-gtd">GTD</span>';
      else if (typ === 'po') badge = '<span class="s-badge s-po">PO</span>';
      else if (typ === 'to') badge = '<span class="s-badge s-to">TO</span>';
      else if (typ === 'qo') badge = '<span class="s-badge s-qo">QO</span>';
      else if (typ === 'ch') badge = '<span class="s-badge s-ch">CH</span>';
      else if (typ === 'dead') badge = '<span class="s-badge s-dead">DEAD</span>';
      else if (typ === '2way') badge = '<span class="s-badge" style="background:rgba(139,92,246,.15); color:#8b5cf6; border:1px solid rgba(139,92,246,.3)">2WAY</span>';
      
      return `
        <div class="sal-cell">
          <span class="s-amt">${fmt(sal)}</span>
          <span class="s-pct">${percentage}</span>
          ${badge ? badge : ''}
        </div>
      `;
    }).join('');
    
    const hasOption = YEARS.some(y => ['po','to','qo','ch'].includes(p.typ[y]));
    const isCapHold = YEARS.slice(1).some(y => p.typ[y] === 'ch');
    const isDead = p.typ['2025-26'] === 'dead';
    const is2Way = p.typ['2025-26'] === '2way';
    
    const actions = (isDead || is2Way) ? '' : `
      <div class="act">
        <button class="act-btn ${hasOption ? '' : 'disabled'}" onclick="handleOption(${p.id})" ${!hasOption ? 'disabled' : ''} title="Accept or decline player/team options">
          <span>‚öôÔ∏è</span><span>Option</span>
        </button>
        <button class="act-btn ${isCapHold ? '' : 'disabled'}" onclick="waiveCapHold(${p.id})" ${!isCapHold ? 'disabled' : ''} title="Waive cap hold to clear cap space">
          <span>üß¢</span><span>Cap Hold</span>
        </button>
        <button class="act-btn" onclick="toggleTrade(${p.id})" title="Add/remove player from trade block">
          <span>üîÑ</span><span>Trade</span>
        </button>
        <button class="act-btn" onclick="handleWaive(${p.id})" title="Waive or stretch player's contract">
          <span>‚úÇÔ∏è</span><span>Waive</span>
        </button>
      </div>
    `;
    
    // Show dash for 2-way players and dead money, row number for active roster
    const displayNum = (is2Way || isDead) ? '‚Äî' : (i + 1);
    
    return `
      <div class="tbl-row" id="player-${p.id}">
        <div class="r-num">${displayNum}</div>
        <div class="r-name" ${(isDead || is2Way) ? '' : 'onclick="editContract(' + p.id + ')" style="cursor:pointer; text-decoration:underline" title="Click to edit player contract details"'}>${p.name}</div>
        <div style="text-align:center; color:var(--txt2); font-size:12px">${p.age || '‚Äî'}</div>
        ${salCells}
        ${actions}
      </div>
    `;
  }).join('');
  
  document.getElementById('rosterBody').innerHTML = html;
}

function renderDead() {
  // Dead money is now integrated into main roster with üíÄ prefix
  // No separate section needed
}

function renderTrade() {
  const sec = document.getElementById('tradeSection');
  const hasOutgoing = tradeBlock.length > 0;
  const hasIncoming = incomingPlayers.length > 0;
  
  if (!hasOutgoing && !hasIncoming) {
    sec.style.display = 'none';
    return;
  }
  
  sec.style.display = 'block';
  
  if (acquisitionMode === 'trade' && hasIncoming) {
    document.getElementById('incomingSection').style.display = 'block';
    const incomingHtml = incomingPlayers.map(p => {
      const salCells = YEARS.map(year => {
        const sal = p.sal[year] || 0;
        return `<div class="sal-cell"><span class="s-amt">${fmt(sal)}</span></div>`;
      }).join('');
      
      return `
        <div class="tbl-row" style="background:rgba(16,185,129,.05)">
          <div class="r-num">üì•</div>
          <div class="r-name">${p.name}</div>
          ${salCells}
          <div class="act">
            <button class="act-btn" onclick="removeIncoming(${p.id})">Remove</button>
          </div>
        </div>
      `;
    }).join('');
    
    const incomingTotals = YEARS.map(year => {
      const total = incomingPlayers.reduce((sum, p) => sum + (p.sal[year] || 0), 0);
      return `<div>${fmt(total)}</div>`;
    }).join('');
    
    document.getElementById('incomingBody').innerHTML = incomingHtml;
    document.getElementById('incomingTotal').innerHTML = `
      <div></div><div style="text-align:left; padding-left:0">Total Incoming:</div>
      ${incomingTotals}
      <div></div>
    `;
  } else {
    document.getElementById('incomingSection').style.display = 'none';
  }
  
  if (hasOutgoing) {
    const outgoingHtml = tradeBlock.map(p => {
      const salCells = YEARS.map(year => {
        const sal = p.sal[year] || 0;
        return `<div class="sal-cell"><span class="s-amt">${fmt(sal)}</span></div>`;
      }).join('');
      
      return `
        <div class="tbl-row" style="background:rgba(239,68,68,.05)">
          <div class="r-num">üì§</div>
          <div class="r-name">${p.name}</div>
          ${salCells}
          <div class="act">
            <button class="act-btn" onclick="toggleTrade(${p.id})">Remove</button>
          </div>
        </div>
      `;
    }).join('');
    
    const outgoingTotals = YEARS.map(year => {
      const total = tradeBlock.reduce((sum, p) => sum + (p.sal[year] || 0), 0);
      return `<div>${fmt(total)}</div>`;
    }).join('');
    
    document.getElementById('tradeBody').innerHTML = outgoingHtml;
    document.getElementById('outgoingTotal').innerHTML = `
      <div></div><div style="text-align:left; padding-left:0">Total Outgoing:</div>
      ${outgoingTotals}
      <div></div>
    `;
  }
  
  if (acquisitionMode === 'trade' && hasOutgoing && hasIncoming) {
    const outgoing2025 = tradeBlock.reduce((sum, p) => sum + (p.sal['2025-26'] || 0), 0);
    const incoming2025 = incomingPlayers.reduce((sum, p) => sum + (p.sal['2025-26'] || 0), 0);
    
    const match = calculateTradeMatch(outgoing2025);
    const isLegal = incoming2025 <= match.max;
    
    document.getElementById('tradeLegalityBox').innerHTML = `
      <div class="trade-legality">
        <div class="trade-legality-title">‚öñÔ∏è TRADE LEGALITY CHECK (2025-26 Only)</div>
        <div class="trade-legality-row">
          <span class="lbl">Outgoing Salary:</span>
          <span class="val">${fmt(outgoing2025)}</span>
        </div>
        <div class="trade-legality-row">
          <span class="lbl">Rule Applied:</span>
          <span class="val">${match.formula} (${match.rule})</span>
        </div>
        <div class="trade-legality-row">
          <span class="lbl">Maximum Incoming:</span>
          <span class="val">${fmt(match.max)}</span>
        </div>
        <div class="trade-legality-row">
          <span class="lbl">Incoming Salary:</span>
          <span class="val">${fmt(incoming2025)}</span>
        </div>
        <div class="trade-legality-row">
          <span class="lbl">Trade Status:</span>
          <span class="trade-status ${isLegal ? 'legal' : 'illegal'}">
            ${isLegal ? '‚úÖ LEGAL TRADE' : '‚ùå ILLEGAL TRADE'}
          </span>
        </div>
      </div>
    `;
  } else {
    document.getElementById('tradeLegalityBox').innerHTML = '';
  }
}

function updateCapSummary() {
  const year = '2025-26';
  const th = CAP_THRESHOLDS[year];
  const total = roster.reduce((sum, p) => sum + (p.sal[year] || 0), 0);
  
  const capSpace = th.cap - total;
  const taxSpace = th.tax - total;
  
  // Update control panel cap situation boxes
  const capControl = document.getElementById('capSummaryControl');
  const taxControl = document.getElementById('taxSummaryControl');
  
  if (capControl) {
    capControl.textContent = fmt(Math.abs(capSpace));
    capControl.className = capSpace > 0 ? 'cap-value-green' : 'cap-value-red';
    capControl.style.fontSize = '20px';
    capControl.style.fontWeight = '900';
  }
  
  if (taxControl) {
    taxControl.textContent = fmt(Math.abs(taxSpace));
    taxControl.className = taxSpace > 0 ? 'cap-value-green' : 'cap-value-red';
    taxControl.style.fontSize = '20px';
    taxControl.style.fontWeight = '900';
  }
  
  // Legacy cap summary (if exists)
  const legacyEl = document.getElementById('capSummary');
  if (legacyEl) {
    legacyEl.innerHTML = `
      <div style="text-align:center">
        <div style="font-size:11px; color:var(--txt2); margin-bottom:4px; text-transform:uppercase; font-weight:700">Cap Space</div>
        <div style="color:${capSpace > 0 ? 'var(--green)' : 'var(--danger)'}; font-size:17px; font-weight:800">${fmt(Math.abs(capSpace))}</div>
      </div>
      <div style="text-align:center">
        <div style="font-size:11px; color:var(--txt2); margin-bottom:4px; text-transform:uppercase; font-weight:700">Tax Space</div>
        <div style="color:${taxSpace > 0 ? 'var(--green)' : 'var(--danger)'}; font-size:17px; font-weight:800">${fmt(Math.abs(taxSpace))}</div>
      </div>
    `;
  }
}

function renderCapSituation() {
  const rows = [
    { label: 'Cap Room', key: 'cap' },
    { label: 'Tax Room', key: 'tax' },
    { label: '1st Apron', key: 'apron1' },
    { label: '2nd Apron', key: 'apron2' }
  ];
  
  const html = rows.map(row => {
    const cells = YEARS.map(year => {
      const th = CAP_THRESHOLDS[year];
      const rosterTotal = roster.reduce((sum, p) => sum + (p.sal[year] || 0), 0);
      const total = rosterTotal;
      
      const room = th[row.key] - total;
      const cls = room > 0 ? 'color:#22c55e' : 'color:#ef4444';
      return `<div style="text-align:center; font-size:14px; font-weight:700; ${cls}">${fmt(Math.abs(room))}</div>`;
    }).join('');
    
    return `
      <div style="display:grid; grid-template-columns: 3.23% 15% 2.5% 14.31% 13.31% 13.31% 13.31% 13.31% 11.72%; gap:0; padding:12px 20px; border-bottom:1px solid var(--bg3)">
        <div></div>
        <div style="font-weight:700; font-size:14px">${row.label}</div>
        <div></div>
        ${cells}
        <div></div>
      </div>
    `;
  }).join('');
  
  // Calculate total cap holds only (CH, QO types)
  const capHoldsRow = YEARS.map(year => {
    const capHoldsTotal = roster.reduce((sum, p) => {
      const typ = p.typ[year];
      if (typ === 'ch' || typ === 'qo') {
        return sum + (p.sal[year] || 0);
      }
      return sum;
    }, 0);
    return `<div style="text-align:center; font-size:14px; font-weight:700; color:var(--txt2)">${fmt(capHoldsTotal)}</div>`;
  }).join('');
  
  // Calculate max cap space: total guaranteed minus cap holds
  const maxCapRow = YEARS.map(year => {
    const th = CAP_THRESHOLDS[year];
    // Total guaranteed includes: GTD, PO, TO, CH, DEAD
    const guaranteedTotal = roster.reduce((sum, p) => {
      return sum + (p.sal[year] || 0);
    }, 0);
    // Total cap holds
    const capHoldsTotal = roster.reduce((sum, p) => {
      const typ = p.typ[year];
      if (typ === 'ch' || typ === 'qo') {
        return sum + (p.sal[year] || 0);
      }
      return sum;
    }, 0);
    const maxCap = th.cap - (guaranteedTotal - capHoldsTotal);
    const cls = maxCap > 0 ? 'color:#22c55e' : 'color:#ef4444';
    return `<div style="text-align:center; font-size:14px; font-weight:700; ${cls}">${fmt(Math.abs(maxCap))}</div>`;
  }).join('');
  
  const fullHtml = html + 
    `<div style="display:grid; grid-template-columns: 3.23% 15% 2.5% 14.31% 13.31% 13.31% 13.31% 13.31% 11.72%; gap:0; padding:16px 20px 12px 20px; border-top:2px solid var(--bg3)">
      <div></div>
      <div style="font-weight:700; font-size:14px">Total Cap Holds</div>
      <div></div>
      ${capHoldsRow}
      <div></div>
    </div>` +
    `<div style="display:grid; grid-template-columns: 3.23% 15% 2.5% 14.31% 13.31% 13.31% 13.31% 13.31% 11.72%; gap:0; padding:12px 20px">
      <div></div>
      <div style="font-weight:700; font-size:14px">Max Cap Space</div>
      <div></div>
      ${maxCapRow}
      <div></div>
    </div>`;
  
  document.getElementById('capSituationBody').innerHTML = fullHtml;
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// ACTION HANDLERS
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

function toggleTrade(id) {
  const idx = tradeBlock.findIndex(p => p.id === id);
  if (idx > -1) {
    tradeBlock.splice(idx, 1);
  } else {
    const player = roster.find(p => p.id === id);
    if (player) tradeBlock.push(player);
  }
  saveHistory();
  render();
}

function removeIncoming(id) {
  incomingPlayers = incomingPlayers.filter(p => p.id !== id);
  saveHistory();
  render();
}

function handleOption(id) {
  const player = roster.find(p => p.id === id);
  if (!player) return;
  
  let optYear = null;
  let optType = null;
  for (const year of YEARS) {
    const typ = player.typ[year];
    if (['po','to','qo','ch'].includes(typ)) {
      optYear = year;
      optType = typ;
      break;
    }
  }
  
  if (!optYear) {
    alert('No option found for this player');
    return;
  }
  
  const typeLabels = {
    'po': 'Player Option',
    'to': 'Team Option',
    'qo': 'Qualifying Offer',
    'ch': 'Cap Hold'
  };
  
  const label = typeLabels[optType] || 'Option';
  const amount = fmt(player.sal[optYear]);
  
  showModal(`
    <div class="modal-hdr">${player.name} - ${label}</div>
    <div class="modal-body">
      <div class="modal-row">
        <div class="modal-lbl">${label} for ${optYear}</div>
        <div style="font-size:24px; font-weight:700; color:var(--txt)">${amount}</div>
      </div>
      <div class="modal-row">
        <p style="color:var(--txt2); font-size:13px; line-height:1.6">
          ${optType === 'po' ? 'Player can choose to opt in or become a free agent.' : ''}
          ${optType === 'to' ? 'Team can choose to exercise the option or let player become a free agent.' : ''}
          ${optType === 'qo' ? 'Qualifying offer makes player a restricted free agent.' : ''}
          ${optType === 'ch' ? 'Cap hold against team salary if option not exercised.' : ''}
        </p>
      </div>
      <div class="modal-actions">
        <button class="modal-btn modal-btn-cancel" onclick="closeModal()">Cancel</button>
        <button class="modal-btn modal-btn-danger" onclick="declineOption(${id}, '${optYear}')">Decline</button>
        <button class="modal-btn modal-btn-primary" onclick="pickupOption(${id}, '${optYear}')">Pick Up</button>
      </div>
    </div>
  `);
}

function pickupOption(id, year) {
  const player = roster.find(p => p.id === id);
  if (player) {
    player.typ[year] = 'gtd';
    saveHistory();
    render();
  }
  closeModal();
}

function declineOption(id, year) {
  const player = roster.find(p => p.id === id);
  if (player) {
    const yearIdx = YEARS.indexOf(year);
    for (let i = yearIdx; i < YEARS.length; i++) {
      player.sal[YEARS[i]] = 0;
      player.typ[YEARS[i]] = '';
    }
    saveHistory();
    render();
  }
  closeModal();
}

function waiveCapHold(id) {
  const player = roster.find(p => p.id === id);
  if (!player) return;
  
  if (!confirm(`Waive cap hold for ${player.name}? Player will remain on roster for 2025-26 only.`)) return;
  
  let chYear = null;
  for (const year of YEARS.slice(1)) {
    if (player.typ[year] === 'ch') {
      chYear = year;
      break;
    }
  }
  
  if (!chYear) {
    alert('No cap hold found');
    return;
  }
  
  const chIdx = YEARS.indexOf(chYear);
  for (let i = chIdx; i < YEARS.length; i++) {
    player.sal[YEARS[i]] = 0;
    player.typ[YEARS[i]] = '';
  }
  
  saveHistory();
  render();
}

function handleWaive(id) {
  const player = roster.find(p => p.id === id);
  if (!player) return;
  
  const stretchableYears = YEARS.filter(year => {
    const typ = player.typ[year] || '';
    const sal = player.sal[year] || 0;
    return ['gtd', 'po', 'to'].includes(typ) && sal > 0;
  });
  
  if (stretchableYears.length === 0) {
    alert('No stretchable salary found');
    return;
  }
  
  const yearOptions = stretchableYears.map(y => 
    `<option value="${y}">${y}</option>`
  ).join('');
  
  showModal(`
    <div class="modal-hdr">Waive ${player.name}</div>
    <div class="modal-body">
      <div class="modal-row">
        <div class="modal-lbl">When to waive?</div>
        <select class="modal-select" id="waiveYear">
          ${yearOptions}
        </select>
      </div>
      <div class="modal-actions" style="flex-direction:column; gap:12px">
        <button class="modal-btn modal-btn-danger" onclick="waiveImmediate(${id})" style="width:100%">
          üíÄ Waive Immediately
        </button>
        <button class="modal-btn modal-btn-primary" onclick="waiveStretch(${id})" style="width:100%">
          üìä Waive with Stretch
        </button>
        <button class="modal-btn modal-btn-cancel" onclick="closeModal()" style="width:100%">
          Cancel
        </button>
      </div>
    </div>
  `);
}

function waiveImmediate(id) {
  const player = roster.find(p => p.id === id);
  if (!player) return;
  
  const startYear = document.getElementById('waiveYear').value;
  const startIdx = YEARS.indexOf(startYear);
  
  const gtdAmounts = {};
  for (let i = startIdx; i < YEARS.length; i++) {
    const year = YEARS[i];
    if (player.typ[year] === 'gtd' && player.sal[year] > 0) {
      gtdAmounts[year] = player.sal[year];
    }
  }
  
  deadMoney.push({
    id: Date.now(),
    name: player.name,
    sal: gtdAmounts,
    typ: Object.keys(gtdAmounts).reduce((acc, y) => ({...acc, [y]: 'dead'}), {}),
    stretched: false,
    stretchStart: null
  });
  
  roster = roster.filter(p => p.id !== id);
  
  saveHistory();
  render();
  closeModal();
}

function waiveStretch(id) {
  const player = roster.find(p => p.id === id);
  if (!player) return;
  
  const startYear = document.getElementById('waiveYear').value;
  const stretch = calculateStretchProvision(player, startYear);
  
  if (!stretch) {
    alert('Cannot calculate stretch provision');
    closeModal();
    return;
  }
  
  const stretchedSal = {};
  const stretchedTyp = {};
  
  for (let i = 0; i < stretch.startIdx; i++) {
    const year = YEARS[i];
    if (player.sal[year] > 0) {
      stretchedSal[year] = player.sal[year];
      stretchedTyp[year] = 'dead';
    }
  }
  
  for (let i = 0; i < stretch.stretchYears && (stretch.startIdx + i) < YEARS.length; i++) {
    const year = YEARS[stretch.startIdx + i];
    stretchedSal[year] = stretch.annualHit;
    stretchedTyp[year] = 'dead';
  }
  
  deadMoney.push({
    id: Date.now(),
    name: player.name,
    sal: stretchedSal,
    typ: stretchedTyp,
    stretched: true,
    stretchStart: startYear
  });
  
  roster = roster.filter(p => p.id !== id);
  
  alert(`${player.name} stretched: ${fmt(stretch.totalGtd)} over ${stretch.stretchYears} years = ${fmt(stretch.annualHit)}/year starting ${startYear}`);
  
  saveHistory();
  render();
  closeModal();
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// SEARCH & ADD PLAYERS
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// OLD SEARCH BAR CODE - COMMENTED OUT (Now using modal-based search)
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

// const searchInput = document.getElementById('searchInput');
// const dropdown = document.getElementById('searchDropdown');

// searchInput.addEventListener('input', e => {
//   const query = e.target.value.trim().toLowerCase();
//   if (query.length < 2) {
//     dropdown.classList.remove('show');
//     return;
//   }
//   
//   const results = NBA_DB.filter(p => 
//     p.name.toLowerCase().includes(query) ||
//     p.team.toLowerCase().includes(query)
//   ).slice(0, 8);
//   
//   if (results.length === 0) {
//     dropdown.innerHTML = '<div class="dropdown-item"><div class="d-name">No players found</div></div>';
//     dropdown.classList.add('show');
//     return;
//   }
//   
//   dropdown.innerHTML = results.map(p => {
//     const sal = fmt(p.sal['2025-26']);
//     return `
//       <div class="dropdown-item" onclick="selectPlayer('${p.name}', '${p.team}', ${JSON.stringify(p.sal).replace(/"/g, '&quot;')})">
//         <div class="d-name">${p.name}</div>
//         <div class="d-meta">${p.team} ¬∑ ${sal}</div>
//       </div>
//     `;
//   }).join('');
//   
//   dropdown.classList.add('show');
// });

function selectPlayer(name, team, sal) {
  // dropdown.classList.remove('show');
  // searchInput.value = '';
  
  if (acquisitionMode === 'trade') {
    incomingPlayers.push({
      id: Date.now(),
      name: name,
      team: team,
      sal: sal,
      typ: YEARS.reduce((acc, y) => ({...acc, [y]: 'gtd'}), {})
    });
    saveHistory();
    render();
  } else {
    const newId = Math.max(...roster.map(p => p.id), 0) + 1;
    const newPlayer = {
      id: newId,
      name: name,
      sal: sal,
      typ: YEARS.reduce((acc, y) => ({...acc, [y]: sal[y] > 0 ? 'gtd' : ''}), {})
    };
    
    roster.push(newPlayer);
    saveHistory();
    render();
    
    showSalaryModal(newId);
  }
}

function showSalaryModal(id) {
  const player = roster.find(p => p.id === id);
  if (!player) return;
  
  const inputs = YEARS.map(year => {
    const val = (player.sal[year] || 0) / 1000000;
    return `
      <div class="modal-row">
        <div class="modal-lbl">${year}</div>
        <div class="modal-input-group">
          <input type="number" step="0.1" class="modal-input" id="sal-${year}" value="${val}" />
          <span>M</span>
        </div>
      </div>
    `;
  }).join('');
  
  showModal(`
    <div class="modal-hdr">Enter Salary for ${player.name}</div>
    <div class="modal-body">
      ${inputs}
      <div class="modal-actions">
        <button class="modal-btn modal-btn-cancel" onclick="closeModal()">Cancel</button>
        <button class="modal-btn modal-btn-primary" onclick="saveSalary(${id})">Save</button>
      </div>
    </div>
  `);
}

function editContract(id) {
  const player = roster.find(p => p.id === id);
  if (!player) return;
  
  const inputs = YEARS.map(year => {
    const val = (player.sal[year] || 0) / 1000000;
    const currentType = player.typ[year] || '';
    
    return `
      <div class="modal-row">
        <div class="modal-lbl">${year}</div>
        <div class="modal-input-group">
          <input type="number" step="0.1" class="modal-input" id="sal-${year}" value="${val}" placeholder="0" />
          <span>M</span>
          <select class="modal-select" id="typ-${year}" style="margin-left:8px; width:90px">
            <option value="">Auto</option>
            <option value="gtd" ${currentType === 'gtd' ? 'selected' : ''}>GTD</option>
            <option value="po" ${currentType === 'po' ? 'selected' : ''}>PO</option>
            <option value="to" ${currentType === 'to' ? 'selected' : ''}>TO</option>
            <option value="qo" ${currentType === 'qo' ? 'selected' : ''}>QO</option>
            <option value="ch" ${currentType === 'ch' ? 'selected' : ''}>CH</option>
          </select>
        </div>
      </div>
    `;
  }).join('');
  
  showModal(`
    <div class="modal-hdr">Edit Contract - ${player.name}</div>
    <div class="modal-body">
      <div class="modal-row">
        <p style="color:var(--txt2); font-size:12px; line-height:1.6; margin-bottom:12px">
          Enter salary and select type. <strong>CH = Cap Hold</strong> for unrestricted free agents.
        </p>
      </div>
      ${inputs}
      <div class="modal-actions">
        <button class="modal-btn modal-btn-cancel" onclick="closeModal()">Cancel</button>
        <button class="modal-btn modal-btn-primary" onclick="saveContractEdit(${id})">Save Changes</button>
      </div>
    </div>
  `);
}

function saveContractEdit(id) {
  const player = roster.find(p => p.id === id);
  if (!player) return;
  
  YEARS.forEach(year => {
    const salInput = document.getElementById(`sal-${year}`);
    const typSelect = document.getElementById(`typ-${year}`);
    
    if (salInput && typSelect) {
      const val = parseFloat(salInput.value) || 0;
      const newSal = Math.floor(val * 1000000);
      const selectedType = typSelect.value;
      
      player.sal[year] = newSal;
      
      // Use manually selected type, or auto-set to gtd if not specified
      if (selectedType) {
        player.typ[year] = selectedType;
      } else {
        player.typ[year] = newSal > 0 ? 'gtd' : '';
      }
    }
  });
  
  saveHistory();
  render();
  closeModal();
}

function saveSalary(id) {
  const player = roster.find(p => p.id === id);
  if (!player) return;
  
  YEARS.forEach(year => {
    const input = document.getElementById(`sal-${year}`);
    if (input) {
      const val = parseFloat(input.value) || 0;
      player.sal[year] = Math.floor(val * 1000000);
      player.typ[year] = val > 0 ? 'gtd' : '';
    }
  });
  
  saveHistory();
  render();
  closeModal();
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// MODAL UTILITIES
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

function showModal(html) {
  window.scrollTo({ top: 0, behavior: 'instant' }); // Scroll to top immediately
  document.getElementById('modal').innerHTML = html;
  document.getElementById('modalOverlay').classList.add('show');
  document.body.style.overflow = 'hidden'; // Prevent scrolling
}

function closeModal() {
  document.getElementById('modalOverlay').classList.remove('show');
  document.body.style.overflow = ''; // Restore scrolling
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// HISTORY & PERSISTENCE
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

function saveHistory() {
  redoStack = [];
  
  if (historyIndex < history.length - 1) {
    history = history.slice(0, historyIndex + 1);
  }
  
  history.push({
    roster: JSON.parse(JSON.stringify(roster)),
    capHolds: JSON.parse(JSON.stringify(capHolds)),
    deadMoney: JSON.parse(JSON.stringify(deadMoney)),
    emptyRows: JSON.parse(JSON.stringify(emptyRows)),
    tradeBlock: JSON.parse(JSON.stringify(tradeBlock)),
    incomingPlayers: JSON.parse(JSON.stringify(incomingPlayers))
  });
  
  if (history.length > MAX_HISTORY) history.shift();
  historyIndex = history.length - 1;
  
  saveState();
}

function undo() {
  if (historyIndex <= 0) {
    alert('Nothing to undo');
    return;
  }
  
  redoStack.push({
    roster: JSON.parse(JSON.stringify(roster)),
    capHolds: JSON.parse(JSON.stringify(capHolds)),
    deadMoney: JSON.parse(JSON.stringify(deadMoney)),
    emptyRows: JSON.parse(JSON.stringify(emptyRows)),
    tradeBlock: JSON.parse(JSON.stringify(tradeBlock)),
    incomingPlayers: JSON.parse(JSON.stringify(incomingPlayers))
  });
  
  historyIndex--;
  const state = history[historyIndex];
  roster = JSON.parse(JSON.stringify(state.roster));
  capHolds = JSON.parse(JSON.stringify(state.capHolds));
  deadMoney = JSON.parse(JSON.stringify(state.deadMoney));
  emptyRows = JSON.parse(JSON.stringify(state.emptyRows));
  tradeBlock = JSON.parse(JSON.stringify(state.tradeBlock));
  incomingPlayers = JSON.parse(JSON.stringify(state.incomingPlayers));
  
  render();
  saveState();
}

function redo() {
  if (redoStack.length === 0) {
    alert('Nothing to redo');
    return;
  }
  
  const state = redoStack.pop();
  historyIndex++;
  
  if (historyIndex >= history.length) {
    history.push(state);
  } else {
    history[historyIndex] = state;
  }
  
  roster = JSON.parse(JSON.stringify(state.roster));
  capHolds = JSON.parse(JSON.stringify(state.capHolds));
  deadMoney = JSON.parse(JSON.stringify(state.deadMoney));
  emptyRows = JSON.parse(JSON.stringify(state.emptyRows));
  tradeBlock = JSON.parse(JSON.stringify(state.tradeBlock));
  incomingPlayers = JSON.parse(JSON.stringify(state.incomingPlayers));
  
  render();
  saveState();
}

function saveState() {
  localStorage.setItem('bullsCapManager_v5.2', JSON.stringify({
    roster, capHolds, deadMoney, emptyRows, tradeBlock, incomingPlayers
  }));
}

function loadState() {
  const saved = localStorage.getItem('bullsCapManager_v5.2');
  if (saved) {
    try {
      const state = JSON.parse(saved);
      roster = state.roster || roster;
      capHolds = state.capHolds || [];
      deadMoney = state.deadMoney || deadMoney;
      emptyRows = state.emptyRows || [];
      tradeBlock = state.tradeBlock || [];
      incomingPlayers = state.incomingPlayers || [];
    } catch (e) {
      console.error('Failed to load state:', e);
    }
  }
}

function resetAll() {
  if (!confirm('Reset to original Bulls roster? This cannot be undone.')) return;
  localStorage.removeItem('bullsCapManager_v5.2');
  location.reload();
}

function addRow() {
  const newId = Math.max(...roster.map(p => p.id), ...emptyRows.map(p => p.id), 0) + 1;
  const newRow = {
    id: newId,
    name: 'New Player',
    sal: YEARS.reduce((acc, y) => ({...acc, [y]: 0}), {}),
    typ: YEARS.reduce((acc, y) => ({...acc, [y]: ''}), {})
  };
  roster.push(newRow);
  saveHistory();
  render();
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// ROSTER MANAGEMENT
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

function openManageRoster() {
  const playerRows = roster.map(p => {
    const sal2025 = fmt(p.sal['2025-26']);
    return `
      <div style="display:flex; justify-content:space-between; align-items:center; padding:10px; border-bottom:1px solid var(--bg3)">
        <div>
          <div style="font-weight:600; font-size:14px">${p.name}</div>
          <div style="font-size:12px; color:var(--txt2)">${sal2025} ¬∑ 2025-26</div>
        </div>
        <button class="modal-btn modal-btn-danger" onclick="deletePlayer(${p.id})" style="padding:6px 12px">
          üóëÔ∏è Remove
        </button>
      </div>
    `;
  }).join('');
  
  showModal(`
    <div class="modal-hdr">üë• Manage Roster (${roster.length} players)</div>
    <div class="modal-body">
      <div style="margin-bottom:16px">
        <div class="modal-lbl">Search Players</div>
        <input type="text" class="modal-input" id="manageSearchInput" placeholder="Search NBA players to add..." autocomplete="off" oninput="filterManagePlayers()">
        <div id="manageSearchResults" style="max-height:200px; overflow-y:auto; margin-top:8px; border:1px solid var(--bg3); border-radius:6px; display:none"></div>
      </div>
      <div style="margin-bottom:16px">
        <p style="color:var(--txt2); font-size:13px; line-height:1.6">
          Remove players from your roster or search to add new ones.
        </p>
      </div>
      <div style="max-height:400px; overflow-y:auto">
        ${playerRows}
      </div>
      <div class="modal-actions">
        <button class="modal-btn modal-btn-cancel" onclick="closeModal()">Close</button>
      </div>
    </div>
  `);
}

function openTradeSearch() {
  showModal(`
    <div class="modal-hdr">üîÑ Trade Machine - Search Players</div>
    <div class="modal-body">
      <div style="margin-bottom:16px">
        <div class="modal-lbl">Search NBA Players</div>
        <input type="text" class="modal-input" id="tradeSearchInput" placeholder="Search players to add to trade..." autocomplete="off" oninput="filterTradeSearchPlayers()">
        <div id="tradeSearchResults" style="max-height:400px; overflow-y:auto; margin-top:8px"></div>
      </div>
      <div class="modal-actions">
        <button class="modal-btn modal-btn-cancel" onclick="closeModal()">Close</button>
      </div>
    </div>
  `);
  
  // Set trade mode
  setAcquisitionMode('trade');
  
  // Auto-focus search
  setTimeout(() => {
    document.getElementById('tradeSearchInput')?.focus();
  }, 100);
}

function openFASearch() {
  showModal(`
    <div class="modal-hdr">‚úçÔ∏è Sign Free Agents - Search Players</div>
    <div class="modal-body">
      <div style="margin-bottom:16px">
        <div class="modal-lbl">Search Free Agents</div>
        <input type="text" class="modal-input" id="faSearchInput" placeholder="Search free agents to sign..." autocomplete="off" oninput="filterFASearchPlayers()">
        <div id="faSearchResults" style="max-height:400px; overflow-y:auto; margin-top:8px"></div>
      </div>
      <div class="modal-actions">
        <button class="modal-btn modal-btn-cancel" onclick="closeModal()">Close</button>
      </div>
    </div>
  `);
  
  // Set FA mode
  setAcquisitionMode('fa');
  
  // Auto-focus search
  setTimeout(() => {
    document.getElementById('faSearchInput')?.focus();
  }, 100);
}

// Search filter functions for modals
function filterManagePlayers() {
  const input = document.getElementById('manageSearchInput');
  const resultsDiv = document.getElementById('manageSearchResults');
  if (!input || !resultsDiv) return;
  
  const query = input.value.toLowerCase().trim();
  if (!query) {
    resultsDiv.style.display = 'none';
    return;
  }
  
  const matches = NBA_DB.filter(p => p.name.toLowerCase().includes(query)).slice(0, 10);
  if (matches.length === 0) {
    resultsDiv.innerHTML = '<div style="padding:12px; color:var(--txt2)">No players found</div>';
    resultsDiv.style.display = 'block';
    return;
  }
  
  resultsDiv.innerHTML = matches.map(p => `
    <div style="padding:10px; border-bottom:1px solid var(--bg3); cursor:pointer; transition:background .15s" 
         onmouseover="this.style.background='var(--bg2)'" 
         onmouseout="this.style.background='transparent'"
         onclick="addPlayerFromManage('${p.name}')">
      <div style="font-weight:600">${p.name}</div>
      <div style="font-size:12px; color:var(--txt2)">${p.pos} ‚Ä¢ ${p.team}</div>
    </div>
  `).join('');
  resultsDiv.style.display = 'block';
}

function filterTradeSearchPlayers() {
  const input = document.getElementById('tradeSearchInput');
  const resultsDiv = document.getElementById('tradeSearchResults');
  if (!input || !resultsDiv) return;
  
  const query = input.value.toLowerCase().trim();
  if (!query) {
    resultsDiv.innerHTML = '';
    return;
  }
  
  const matches = NBA_DB.filter(p => p.name.toLowerCase().includes(query)).slice(0, 10);
  if (matches.length === 0) {
    resultsDiv.innerHTML = '<div style="padding:12px; color:var(--txt2)">No players found</div>';
    return;
  }
  
  resultsDiv.innerHTML = matches.map(p => `
    <div style="padding:10px; border-bottom:1px solid var(--bg3); cursor:pointer; transition:background .15s"
         onmouseover="this.style.background='var(--bg2)'" 
         onmouseout="this.style.background='transparent'"
         onclick="addPlayerFromSearch('${p.name}'); closeModal();">
      <div style="font-weight:600">${p.name}</div>
      <div style="font-size:12px; color:var(--txt2)">${p.pos} ‚Ä¢ ${p.team}</div>
    </div>
  `).join('');
}

function filterFASearchPlayers() {
  const input = document.getElementById('faSearchInput');
  const resultsDiv = document.getElementById('faSearchResults');
  if (!input || !resultsDiv) return;
  
  const query = input.value.toLowerCase().trim();
  if (!query) {
    resultsDiv.innerHTML = '';
    return;
  }
  
  const matches = NBA_DB.filter(p => p.name.toLowerCase().includes(query)).slice(0, 10);
  if (matches.length === 0) {
    resultsDiv.innerHTML = '<div style="padding:12px; color:var(--txt2)">No players found</div>';
    return;
  }
  
  resultsDiv.innerHTML = matches.map(p => `
    <div style="padding:10px; border-bottom:1px solid var(--bg3); cursor:pointer; transition:background .15s"
         onmouseover="this.style.background='var(--bg2)'" 
         onmouseout="this.style.background='transparent'"
         onclick="openFAContractEdit('${p.name}');">
      <div style="font-weight:600">${p.name}</div>
      <div style="font-size:12px; color:var(--txt2)">${p.pos} ‚Ä¢ ${p.team}</div>
    </div>
  `).join('');
}

function addPlayerFromManage(playerName) {
  const playerData = NBA_DB.find(p => p.name === playerName);
  if (!playerData) return;
  
  // Close current modal
  closeModal();
  
  // Open contract edit modal with manage context
  setTimeout(() => {
    openFAContractEdit(playerName, 'manage');
  }, 100);
}

function openFAContractEdit(playerName, returnToModal = 'fa') {
  const playerData = NBA_DB.find(p => p.name === playerName);
  if (!playerData) return;
  
  // Store player data temporarily for the save function
  window.tempFAPlayer = playerData;
  window.tempFAReturnModal = returnToModal;
  
  const inputs = YEARS.map(year => {
    return `
      <div class="modal-row">
        <div class="modal-lbl">${year}</div>
        <div class="modal-input-group">
          <input type="number" step="0.1" class="modal-input" id="sal-${year}" value="0" placeholder="0" />
          <span>M</span>
          <select class="modal-select" id="typ-${year}" style="margin-left:8px; width:90px">
            <option value="">Auto</option>
            <option value="gtd">GTD</option>
            <option value="po">PO</option>
            <option value="to">TO</option>
            <option value="qo">QO</option>
            <option value="ch">CH</option>
          </select>
        </div>
      </div>
    `;
  }).join('');
  
  const cancelAction = returnToModal === 'fa' ? 'openFASearch()' : 'openManageRoster()';
  
  showModal(`
    <div class="modal-hdr">Sign Free Agent - ${playerData.name}</div>
    <div class="modal-body">
      <div class="modal-row">
        <p style="color:var(--txt2); font-size:12px; line-height:1.6; margin-bottom:12px">
          Enter contract details for <strong>${playerData.name}</strong>. Player will be added to your roster.
        </p>
      </div>
      ${inputs}
      <div class="modal-actions">
        <button class="modal-btn modal-btn-cancel" onclick="closeModal(); ${cancelAction};">Cancel</button>
        <button class="modal-btn modal-btn-primary" onclick="saveFAContract()">Sign Player</button>
      </div>
    </div>
  `);
}

function saveFAContract() {
  const playerData = window.tempFAPlayer;
  if (!playerData) return;
  
  // Create new player object with entered contract details
  const newPlayer = {
    id: Date.now(),
    name: playerData.name,
    team: 'CHI', // Bulls team
    pos: playerData.pos || '',
    age: playerData.age || 0,
    sal: {},
    typ: {}
  };
  
  // Get contract values from inputs
  YEARS.forEach(year => {
    const salInput = document.getElementById(`sal-${year}`);
    const typSelect = document.getElementById(`typ-${year}`);
    
    if (salInput && typSelect) {
      const val = parseFloat(salInput.value) || 0;
      const newSal = Math.floor(val * 1000000);
      const selectedType = typSelect.value;
      
      newPlayer.sal[year] = newSal;
      
      // Use manually selected type, or auto-set to gtd if not specified
      if (selectedType) {
        newPlayer.typ[year] = selectedType;
      } else {
        newPlayer.typ[year] = newSal > 0 ? 'gtd' : '';
      }
    }
  });
  
  // Add to roster
  roster.push(newPlayer);
  
  // Clear temp data
  delete window.tempFAPlayer;
  
  saveHistory();
  render();
  closeModal();
}

function addPlayerFromSearch(playerName) {
  const playerData = NBA_DB.find(p => p.name === playerName);
  if (!playerData) return;
  
  if (acquisitionMode === 'trade') {
    incomingPlayers.push({
      id: Date.now(),
      name: playerData.name,
      team: playerData.team,
      sal: playerData.sal,
      typ: YEARS.reduce((acc, y) => ({...acc, [y]: 'gtd'}), {})
    });
    saveHistory();
    render();
  } else {
    addPlayerToRoster(playerData);
  }
}

function openDraftPicks() {
  const firstRound = [
    { year: '2026', pick: 'Own', note: '' },
    { year: '2026', pick: 'Portland', note: 'Top-14 Protected Through 2028' },
    { year: '2027', pick: 'Own', note: '' },
    { year: '2028', pick: 'Own', note: '' },
    { year: '2029', pick: 'Own', note: '' },
    { year: '2030', pick: 'Own', note: '' },
    { year: '2031', pick: 'Own', note: '' },
    { year: '2032', pick: 'Own', note: '' }
  ];
  
  const secondRound = [
    { year: '2026', pick: 'MIN/NYK/NOP/POR', note: 'Most Favorable' },
    { year: '2027', pick: 'DEN/GSW', note: 'Least Favorable' },
    { year: '2028', pick: 'CLE', note: 'Unprotected' },
    { year: '2029', pick: 'Own', note: '' },
    { year: '2029', pick: 'DET/MIL/NYK', note: 'Least Favorable' },
    { year: '2030', pick: 'Own', note: '' },
    { year: '2031', pick: 'Own', note: '' },
    { year: '2031', pick: 'DEN', note: 'Unprotected' },
    { year: '2031', pick: 'MIL', note: 'Unprotected' },
    { year: '2031', pick: 'MIN/GSW', note: 'Most Favorable' },
    { year: '2032', pick: 'Own', note: '' },
    { year: '2032', pick: 'HOU/PHO', note: 'Most Favorable' }
  ];
  
  const firstRoundHTML = firstRound.map(p => `
    <div style="display:grid; grid-template-columns:60px 1fr 1fr; gap:12px; padding:10px; border-bottom:1px solid var(--bg3); align-items:center">
      <div style="font-weight:700; font-size:14px; color:var(--txt)">${p.year}</div>
      <div style="font-weight:600; font-size:13px">${p.pick}</div>
      <div style="font-size:12px; color:var(--txt2)">${p.note}</div>
    </div>
  `).join('');
  
  const secondRoundHTML = secondRound.map(p => `
    <div style="display:grid; grid-template-columns:60px 1fr 1fr; gap:12px; padding:10px; border-bottom:1px solid var(--bg3); align-items:center">
      <div style="font-weight:700; font-size:14px; color:var(--txt)">${p.year}</div>
      <div style="font-weight:600; font-size:13px">${p.pick}</div>
      <div style="font-size:12px; color:var(--txt2)">${p.note}</div>
    </div>
  `).join('');
  
  showModal(`
    <div class="modal-hdr">üìã Draft Picks</div>
    <div class="modal-body" style="max-width:650px">
      <div style="margin-bottom:20px">
        <div style="font-weight:700; font-size:14px; margin-bottom:10px; color:var(--txt)">First Round Picks</div>
        <div style="max-height:250px; overflow-y:auto">
          ${firstRoundHTML}
        </div>
      </div>
      
      <div style="margin-bottom:16px">
        <div style="font-weight:700; font-size:14px; margin-bottom:10px; color:var(--txt)">Second Round Picks</div>
        <div style="max-height:300px; overflow-y:auto">
          ${secondRoundHTML}
        </div>
      </div>
      
      <div class="modal-actions">
        <button class="modal-btn modal-btn-cancel" onclick="closeModal()">Close</button>
      </div>
    </div>
  `);
}

function openExceptions() {
  const exceptions = [
    { name: 'Non-Tax Mid-Level', value: 3330698, expires: '4/12/2026' },
    { name: 'Bi-Annual', value: 4278333, expires: '4/12/2026' },
    { name: 'Traded Player (Kevin Huerter)', value: 17991071, expires: '2/2/2027' },
    { name: 'Traded Player (Ousmane Dieng)', value: 6670882, expires: '2/4/2027' },
    { name: 'Traded Player (Julian Phillips)', value: 2221667, expires: '2/4/2027' },
    { name: 'Traded Player (Coby White)', value: 1218007, expires: '2/4/0207' },
    { name: 'Disabled Player (Noa Essengue)', value: 2714760, expires: '3/10/2026' }
  ];
  
  const exceptionsHTML = exceptions.map(e => `
    <div style="display:grid; grid-template-columns:1fr auto auto; gap:16px; padding:12px; border-bottom:1px solid var(--bg3); align-items:center">
      <div style="font-weight:600; font-size:13px">${e.name}</div>
      <div style="font-weight:700; font-size:14px; color:var(--green)">$${(e.value / 1000000).toFixed(2)}M</div>
      <div style="font-size:12px; color:var(--txt2)">Exp: ${e.expires}</div>
    </div>
  `).join('');
  
  showModal(`
    <div class="modal-hdr">üí∞ Trade Exceptions</div>
    <div class="modal-body" style="max-width:600px">
      <div style="margin-bottom:16px">
        <p style="color:var(--txt2); font-size:13px; line-height:1.6">
          Available trade exceptions and their expiration dates.
        </p>
      </div>
      <div style="max-height:400px; overflow-y:auto">
        ${exceptionsHTML}
      </div>
      <div class="modal-actions">
        <button class="modal-btn modal-btn-cancel" onclick="closeModal()">Close</button>
      </div>
    </div>
  `);
}

function deletePlayer(id) {
  const player = roster.find(p => p.id === id);
  if (!player) return;
  
  if (!confirm(`Remove ${player.name} from roster?`)) return;
  
  roster = roster.filter(p => p.id !== id);
  saveHistory();
  render();
  
  // Refresh the modal
  openManageRoster();
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// INITIALIZATION
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

loadState();
saveHistory();
render();
setAcquisitionMode('trade');

// Old search dropdown click handler - commented out
// document.addEventListener('click', e => {
//   if (!searchInput.contains(e.target) && !dropdown.contains(e.target)) {
//     dropdown.classList.remove('show');
//   }
// });

document.getElementById('modalOverlay').addEventListener('click', e => {
  if (e.target.id === 'modalOverlay') closeModal();
});

// AUTO-SCALE TO FIT SCREEN - DISABLED (using responsive CSS grid instead)
function autoScale() {
  // Responsive grid handles scaling automatically
  // const container = document.querySelector('.container');
  // const contentWidth = 1280;
  // const viewportWidth = window.innerWidth;
  // const padding = 40;
  // const scale = Math.min(1, (viewportWidth - padding) / contentWidth);
  // container.style.transform = `scale(${scale})`;
}

// Run on load and resize
autoScale();
window.addEventListener('resize', autoScale);

</script>
</body>
</html>
